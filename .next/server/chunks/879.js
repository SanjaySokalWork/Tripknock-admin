exports.id=879,exports.ids=[879],exports.modules={50879:function(e,t,a){(function(e){"use strict";function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,l=Array(t);a<t;a++)l[a]=e[a];return l}function a(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,a){if(e){if("string"==typeof e)return t(e,void 0);var l=({}).toString.call(e).slice(8,-1);return"Object"===l&&e.constructor&&(l=e.constructor.name),"Map"===l||"Set"===l?Array.from(e):"Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?t(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Object.assign((e=e&&e.hasOwnProperty("default")?e.default:e).POPUP_TEMPLATES,{"table.insert":"[_BUTTONS_][_ROWS_COLUMNS_]","table.edit":"[_BUTTONS_]","table.colors":"[_BUTTONS_][_COLORS_][_CUSTOM_COLOR_]"}),Object.assign(e.DEFAULTS,{tableInsertMaxSize:10,tableEditButtons:["tableHeader","tableFooter","tableRemove","tableRows","tableColumns","tableStyle","-","tableCells","tableCellBackground","tableCellVerticalAlign","tableCellHorizontalAlign","tableCellStyle"],tableInsertButtons:["tableBack","|"],tableResizer:!0,tableDefaultWidth:"100%",tableResizerOffset:5,tableResizingLimit:30,tableColorsButtons:["tableBack","|"],tableColors:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],tableColorsStep:7,tableCellStyles:{"fr-highlighted":"Highlighted","fr-thick":"Thick"},tableStyles:{"fr-dashed-borders":"Dashed Borders","fr-alternate-rows":"Alternate Rows"},tableCellMultipleStyles:!0,tableMultipleStyles:!0,tableInsertHelper:!0,keepTextFormatOnTable:!1,tableInsertHelperOffset:15}),e.PLUGINS.table=function(t){var l,r,n,o,s,i,f,c=t.$,d={};function p(){var e=O();if(e){var a=t.popups.get("table.edit");if(a||(a=b()),a){t.popups.setContainer("table.edit",t.$sc);var l=M(e),r=l.left+(l.right-l.left)/2,n=l.bottom;t.popups.show("table.edit",r,n,l.bottom-l.top,!0),t.edit.isDisabled()&&(t.$el.removeClass("fr-no-selection"),t.edit.on(),t.button.bulkRefresh(),t.selection.setAtEnd(t.$el.find(".fr-selected-cell").last().get(0)),t.selection.restore())}}}function h(){0===ea().length&&t.toolbar.enable()}function g(a){if(a)return t.popups.onHide("table.insert",function(){t.popups.get("table.insert").find('.fr-table-size .fr-select-table-size > span[data-row="1"][data-col="1"]').trigger("mouseover")}),!0;var l="";0<t.opts.tableInsertButtons.length&&(l='<div class="fr-buttons fr-tabs">'.concat(t.button.buildList(t.opts.tableInsertButtons),"</div>"));var r={buttons:l,rows_columns:function(){for(var e='<div class="fr-table-size"><div class="fr-table-size-info">1 &times; 1</div><div class="fr-select-table-size">',a=1;a<=t.opts.tableInsertMaxSize;a++){for(var l=1;l<=t.opts.tableInsertMaxSize;l++){var r="inline-block";2<a&&!t.helpers.isMobile()&&(r="none");var n="fr-table-cell ";1==a&&1==l&&(n+=" hover"),e+='<span class="fr-command '.concat(n,'" tabIndex="-1" data-cmd="tableInsert" data-row="').concat(a,'" data-col="').concat(l,'" data-param1="').concat(a,'" data-param2="').concat(l,'" style="display: ').concat(r,';" role="button"><span></span><span class="fr-sr-only">').concat(a," &times; ").concat(l,"&nbsp;&nbsp;&nbsp;</span></span>")}e+='<div class="new-line"></div>'}return e+"</div></div>"}()},n=t.popups.create("table.insert",r);return t.events.$on(n,"mouseover",".fr-table-size .fr-select-table-size .fr-table-cell",function(e){u(c(e.currentTarget))},!0),t.events.$on(n,"focus","[tabIndex]",function(e){u(c(e.currentTarget))}),t.events.on("popup.tab",function(a){var l=c(a.currentTarget);if(!t.popups.isVisible("table.insert")||!l.is("span, a"))return!0;var r,n=a.which;if(e.KEYCODE.ARROW_UP==n||e.KEYCODE.ARROW_DOWN==n||e.KEYCODE.ARROW_LEFT==n||e.KEYCODE.ARROW_RIGHT==n){if(l.is("span.fr-table-cell")){var o=l.parent().find("span.fr-table-cell"),s=o.index(l),i=t.opts.tableInsertMaxSize,f=s%i,d=Math.floor(s/i);e.KEYCODE.ARROW_UP==n?d=Math.max(0,d-1):e.KEYCODE.ARROW_DOWN==n?d=Math.min(t.opts.tableInsertMaxSize-1,d+1):e.KEYCODE.ARROW_LEFT==n?f=Math.max(0,f-1):e.KEYCODE.ARROW_RIGHT==n&&(f=Math.min(t.opts.tableInsertMaxSize-1,f+1));var p=d*i+f,h=c(o.get(p));u(h),t.events.disableBlur(),h.focus(),r=!1}}else e.KEYCODE.ENTER==n&&(t.button.exec(l),r=!1);return!1===r&&(a.preventDefault(),a.stopPropagation()),r},!0),n}function u(e){var a=e.data("row");null!==a&&(a=parseInt(a));var l=e.data("col");null!==l&&(l=parseInt(l));var r=e.parent();r.siblings(".fr-table-size-info").html("".concat(a," &times; ").concat(l)),r.find("> span").removeClass("hover fr-active-item");for(var n=1;n<=t.opts.tableInsertMaxSize;n++)for(var o=0;o<=t.opts.tableInsertMaxSize;o++){var s=r.find('> span[data-row="'.concat(n,'"][data-col="').concat(o,'"]'));n<=a&&o<=l?s.addClass("hover"):n<=a+1||n<=2&&!t.helpers.isMobile()?s.css("display","inline-block"):2<n&&!t.helpers.isMobile()&&s.css("display","none")}e.addClass("fr-active-item")}function b(e){if(e)return t.popups.onHide("table.edit",h),!0;if(0<t.opts.tableEditButtons.length){var a={buttons:'<div class="fr-buttons">'.concat(t.button.buildList(t.opts.tableEditButtons),"</div>")},l=t.popups.create("table.edit",a);return t.events.$on(t.$wp,"scroll.table-edit",function(){t.popups.isVisible("table.edit")&&p()}),l}return!1}function m(e){var l={startTag:"",closeTag:""};return t.opts.keepTextFormatOnTable&&(l=v((function(e){for(var t=new Set,l=e.textContent,r=0,n=[e.firstChild];0<n.length;){var o=n.pop();if(o&&(t.has(o)||(0===r&&l!==o.textContent&&(l=o.textContent,r++),t.add(o)),o.hasChildNodes()))for(var s=0;s<o.childNodes.length;){if(3===o.childNodes[s].nodeType)return a(t);if(o.childNodes[s].textContent){if(0===r&&o.childNodes[s].textContent!==l){l=o.childNodes[s].textContent,n.push(o.childNodes[s]),r++;break}o.childNodes[s].textContent===l&&n.push(o.childNodes[s])}s++}}return a(t)})(e).reverse())),{startTag:l.startTag,closeTag:l.closeTag}}function v(e){var a="",l="",r=["br","#text","#comment","font"];if(0<e.length)for(var n=e.length-1;0<=n;n--){var o=e[n],s=t.node.isBlock(o),i=r.indexOf(o.nodeName.toLowerCase());if(!s&&i<0){var f=o.style,c="";if(f&&f.length){for(var d=0;d<f.length;d++)c+=f[d]+": "+f[f[d]].replace(/"/gi,"")+"; ";c=c.trim()}a+=c?"<"+o.nodeName.toLowerCase()+' style="'+c+'">':"<"+o.nodeName.toLowerCase()+">",l="</"+o.nodeName.toLowerCase()+">"+l}}return{startTag:a,closeTag:l}}function C(){if(0<ea().length){var e=el();t.selection.setBefore(e.get(0))||t.selection.setAfter(e.get(0)),t.selection.restore(),t.popups.hide("table.edit"),t.opts.trackChangesEnabled?(t.track_changes.removedTable(e),S()):e.remove(),t.toolbar.enable()}}function w(e){var a=el();if(0<a.length){if(0<t.$el.find("thead .fr-selected-cell").length&&"above"==e||0<t.$el.find("tfoot td.fr-selected-cell").length&&"below"==e)return;var l,r,n,o=O(),s=_(o);if(null==s)return;r="above"==e?s.min_i:s.max_i;var i="<tr>";for(l=0;l<o[r].length;l++)if("below"==e&&r<o.length-1&&o[r][l]==o[r+1][l]||"above"==e&&0<r&&o[r][l]==o[r-1][l]){if(0===l||0<l&&o[r][l]!=o[r][l-1]){var f=c(o[r][l]);f.attr("rowspan",parseInt(f.attr("rowspan"),10)+1)}}else{var d=c(o[r][l]);if("TH"==d.attr("tagName").toUpperCase())i+='<th style="'+d.attr("style")+'" ><br></th>';else{var h=m(o[r][l]);i+='<td style="'+d.attr("style")+'" >'+h.startTag+"<br>"+h.closeTag+"</td>"}}i+="</tr>",n=0<t.$el.find("thead .fr-selected-cell").length&&"below"==e||0<t.$el.find("tfoot td.fr-selected-cell").length&&"above"==e?c(a.find("tbody").not(a.find("> table tbody"))):c(a.find("tr").not(a.find("> table tr")).get(r)),"below"==e?"TBODY"==n.attr("tagName")?n.prepend(i):n[0].parentNode&&n[0].insertAdjacentHTML("afterend",i):"above"==e&&("TBODY"==n.attr("tagName")?n.append(i):n.before(i),t.popups.isVisible("table.edit")&&p())}}function E(e,t,a){var l,r,n,o,s,i=0,f=O(a);if(e<(t=Math.min(t,f[0].length-1))){for(r=e;r<=t;r++)if(!(e<r&&f[0][r]==f[0][r-1])&&1<(o=Math.min(parseInt(f[0][r].getAttribute("colspan"),10)||1,t-e+1))&&f[0][r]==f[0][r+1]){for(i=o-1,l=1;l<f.length;l++)if(f[l][r]!=f[l-1][r]){for(n=r;n<r+o;n++)if(void 0!==f[l][n]){if(1<(s=parseInt(f[l][n].getAttribute("colspan"),10)||1)&&f[l][n]==f[l][n+1])n+=i=Math.min(i,s-1);else if(!(i=Math.max(0,i-1)))break}if(!i)break}}}i&&R(f,i,"colspan",0,f.length-1,e,t)}function y(e,t,a){var l,r,n,o,s,i=0,f=O(a);if(e<(t=Math.min(t,f.length-1))){for(l=e;l<=t;l++)if(!(e<l&&f[l][0]==f[l-1][0])&&void 0!==f[l][0]&&1<(o=Math.min(parseInt(f[l][0].getAttribute("rowspan"),10)||1,t-e+1))&&f[l][0]==f[l+1][0]){for(i=o-1,r=1;r<f[0].length;r++)if(f[l][r]!=f[l][r-1]){for(n=l;n<l+o;n++)if(void 0!==f[n][r]){if(1<(s=parseInt(f[n][r].getAttribute("rowspan"),10)||1)&&f[n][r]==f[n+1][r])n+=i=Math.min(i,s-1);else if(!(i=Math.max(0,i-1)))break}if(!i)break}}}i&&R(f,i,"rowspan",e,t,0,f[0].length-1)}function R(e,t,a,l,r,n,o){var s,i,f;for(s=l;s<=r;s++)for(i=n;i<=o;i++)l<s&&e[s][i]==e[s-1][i]||n<i&&e[s][i]==e[s][i-1]||void 0!==e[s][i]&&1<(f=parseInt(e[s][i].getAttribute(a),10)||1)&&(1<f-t?e[s][i].setAttribute(a,f-t):e[s][i].removeAttribute(a))}function x(e){var a=t.$el.find(".fr-selected-cell");"REMOVE"!=e?a.css("background-color",t.helpers.HEXtoRGB(e)):a.css("background-color",""),p()}function A(e){e.style.removeProperty("border"),e.style.removeProperty("border-top"),e.style.removeProperty("border-bottom"),e.style.removeProperty("border-left"),e.style.removeProperty("border-right")}function O(e){var t=[];if(null==(e=e||null)&&0<ea().length&&(e=el()),e){if(!e.find("tr").html().match(/xl[0-9]+/gi))for(var a=e.find("tr:empty"),l=a.length-1;0<=l;l--)c(a[l]).remove();e.find("tr").not(e.find("> table tr")).each(function(e,a){var l=c(a),r=0;l.find("> th, > td").each(function(a,l){for(var n=c(l),o=parseInt(n.attr("colspan"),10)||1,s=parseInt(n.attr("rowspan"),10)||1,i=e;i<e+s;i++)for(var f=r;f<r+o;f++)t[i]||(t[i]=[]),t[i][f]?r++:t[i][f]=l;r+=o})})}return t}function $(e,t){for(var a=0;a<t.length;a++)for(var l=0;l<t[a].length;l++)if(t[a][l]==e)return{row:a,col:l}}function T(e,t,a){for(var l=e+1,r=t+1;l<a.length;){if(a[l][t]!=a[e][t]){l--;break}l++}for(l==a.length&&l--;r<a[e].length;){if(a[e][r]!=a[e][t]){r--;break}r++}return r==a[e].length&&r--,{row:l,col:r}}function D(){t.el.querySelector(".fr-cell-fixed")&&t.el.querySelector(".fr-cell-fixed").classList.remove("fr-cell-fixed"),t.el.querySelector(".fr-cell-handler")&&t.el.querySelector(".fr-cell-handler").classList.remove("fr-cell-handler")}function S(){var e=t.$el.find(".fr-selected-cell");0<e.length&&e.each(function(){var e=c(this);e.removeClass("fr-selected-cell"),""===e.attr("class")&&e.removeAttr("class")}),D()}function N(){t.events.disableBlur(),t.selection.clear(),t.$el.addClass("fr-no-selection"),t.$el.blur(),t.events.enableBlur()}function _(e){var a=t.$el.find(".fr-selected-cell");if(0<a.length){var l,r=e.length,n=0,o=e[0].length,s=0;for(l=0;l<a.length;l++){var i=$(a[l],e),f=T(i.row,i.col,e);r=Math.min(i.row,r),n=Math.max(f.row,n),o=Math.min(i.col,o),s=Math.max(f.col,s)}return{min_i:r,max_i:n,min_j:o,max_j:s}}return null}function M(e){var t=_(e);if(null!=t){var a=c(e[t.min_i][t.min_j]),l=c(e[t.min_i][t.max_j]),r=c(e[t.max_i][t.min_j]);return{left:a.length&&a.offset().left,right:l.length&&l.offset().left+l.outerWidth(),top:a.length&&a.offset().top,bottom:r.length&&r.offset().top+r.outerHeight()}}}function I(e,a){if(c(e).is(a))S(),c(e).addClass("fr-selected-cell");else{N(),t.edit.off();var l=O(),r=$(e,l),n=$(a,l);if(!r||!n)return;var o=function e(t,a,l,r,n){var o,s,i,f,d=t,p=a,h=l,g=r;for(o=d;o<=p;o++)(1<(parseInt(c(n[o][h]).attr("rowspan"),10)||1)||1<(parseInt(c(n[o][h]).attr("colspan"),10)||1))&&(f=T((i=$(n[o][h],n)).row,i.col,n),d=Math.min(i.row,d),p=Math.max(f.row,p),h=Math.min(i.col,h),g=Math.max(f.col,g)),(1<(parseInt(c(n[o][g]).attr("rowspan"),10)||1)||1<(parseInt(c(n[o][g]).attr("colspan"),10)||1))&&(f=T((i=$(n[o][g],n)).row,i.col,n),d=Math.min(i.row,d),p=Math.max(f.row,p),h=Math.min(i.col,h),g=Math.max(f.col,g));for(s=h;s<=g;s++)(1<(parseInt(c(n[d][s]).attr("rowspan"),10)||1)||1<(parseInt(c(n[d][s]).attr("colspan"),10)||1))&&(f=T((i=$(n[d][s],n)).row,i.col,n),d=Math.min(i.row,d),p=Math.max(f.row,p),h=Math.min(i.col,h),g=Math.max(f.col,g)),(1<(parseInt(c(n[p][s]).attr("rowspan"),10)||1)||1<(parseInt(c(n[p][s]).attr("colspan"),10)||1))&&(f=T((i=$(n[p][s],n)).row,i.col,n),d=Math.min(i.row,d),p=Math.max(f.row,p),h=Math.min(i.col,h),g=Math.max(f.col,g));return d==t&&p==a&&h==l&&g==r?{min_i:t,max_i:a,min_j:l,max_j:r}:e(d,p,h,g,n)}(Math.min(r.row,n.row),Math.max(r.row,n.row),Math.min(r.col,n.col),Math.max(r.col,n.col),l);S(),e.classList.add("fr-cell-fixed"),a.classList.add("fr-cell-handler");for(var s=o.min_i;s<=o.max_i;s++)for(var i=o.min_j;i<=o.max_j;i++)c(e).closest("table").is(c(l[s][i]).closest("table"))&&c(l[s][i]).addClass("fr-selected-cell")}}function k(e){var a=null,l=c(e.target);return"TD"==e.target.tagName||"TH"==e.target.tagName?a=e.target:0<l.closest("th",l.closest("thead")[0]).length?a=l.closest("th",l.closest("thead")[0]).get(0):0<l.closest("td",l.closest("tr")[0]).length&&(a=l.closest("td",l.closest("tr")[0]).get(0)),-1===t.$el.html.toString().search(a)?null:a}function K(){S(),t.popups.hide("table.edit")}function L(e){var a=k(e);if("false"==c(a).parents("[contenteditable]").not(".fr-element").not(".fr-img-caption").not("body").first().attr("contenteditable"))return!0;if(0<ea().length&&!a&&K(),!t.edit.isDisabled()||t.popups.isVisible("table.edit")){if(1!=e.which||1==e.which&&t.helpers.isMac()&&e.ctrlKey)(3==e.which||1==e.which&&t.helpers.isMac()&&e.ctrlKey)&&a&&K();else if(o=!0,a){0<ea().length&&!e.shiftKey&&K(),e.stopPropagation(),t.events.trigger("image.hideResizer"),t.events.trigger("video.hideResizer"),n=!0;var l=a.tagName.toLowerCase();e.shiftKey&&0<t.$el.find("".concat(l,".fr-selected-cell")).length?c(t.$el.find("".concat(l,".fr-selected-cell")).closest("table")).is(c(a).closest("table"))?I(s,a):N():((t.keys.ctrlKey(e)||e.shiftKey)&&"TD"===e.currentTarget.tagName&&(1<ea().length||0===c(a).find(t.selection.element()).length&&!c(a).is(t.selection.element()))&&N(),s=a,0<t.opts.tableEditButtons.length&&I(s,s))}}}function B(e){if(!t.edit.isDisabled()&&t.popups.areVisible())return!0;var a=k(e);if(1===ea().length&&null===a&&(t.toolbar.enable(),S()),(1!==ea().length||!a||"TD"===a.tagName||"TH"===a.tagName)&&(n||t.$tb.is(e.target)||t.$tb.is(c(e.target).closest(".fr-toolbar")))||(t.toolbar.enable(),S()),("BODY"===e.target.tagName||"HTML"===e.target.tagName)&&!a&&0<ea().length&&t.toolbar.enable(),!(1!=e.which||1==e.which&&t.helpers.isMac()&&e.ctrlKey)){if(o=!1,n){if(n=!1,k(e)||1!=ea().length){if(0<ea().length){if(t.browser.mozilla&&!t.selection.isCollapsed()){var r=ea()[ea().length-1],s=t.doc.createRange();t.selection.get().removeAllRanges(),s.setStart(r,0),s.setEnd(r,0),s.collapse(),t.selection.get().addRange(s)}t.selection.isCollapsed()?(p(),t.toolbar.enable()):(S(),t.edit.on())}else ea().length||(t.$el.removeClass("fr-no-selection"),t.edit.on())}else S()}if(f){f=!1,l.removeClass("fr-moving"),t.$el.removeClass("fr-no-selection"),t.edit.on();var i=parseFloat(l.css("left"))+t.opts.tableResizerOffset+t.$wp.offset().left;t.opts.iframe&&(i-=t.$iframe.offset().left),l.data("release-position",i),l.removeData("max-left"),l.removeData("max-right"),function(){var e=l.data("origin"),a=l.data("release-position");if(e!==a){var r=l.data("first"),n=l.data("second"),o=l.data("table"),s=o.outerWidth();if(t.undo.canDo()||t.undo.saveStep(),null!=r&&null!=n){var i,f,d,p=O(o),h=[],g=[],u=[],b=[];for(i=0;i<p.length;i++)f=c(p[i][r]),d=c(p[i][n]),h[i]=f.outerWidth(),u[i]=d.outerWidth(),g[i]=h[i]/s*100,b[i]=u[i]/s*100;for(i=0;i<p.length;i++)if(f=c(p[i][r]),d=c(p[i][n]),p[i][r]!=p[i][n]){var m=(g[i]*(h[i]+a-e)/h[i]).toFixed(4);f.css("width",m+"%"),d.css("width",(g[i]+b[i]-m).toFixed(4)+"%")}}else{var v,C=o.parent(),w=parseFloat(C.css("padding-left")),E=parseFloat(C.css("padding-right")),y=s/(C.width()-(w+E))*100,R=(parseInt(o.css("margin-left"),10)||0)/C.width()*100,x=(parseInt(o.css("margin-right"),10)||0)/C.width()*100;"rtl"==t.opts.direction&&0===n||"rtl"!=t.opts.direction&&0!==n?(v=(s+a-e)/s*y,o.css("margin-right","calc(100% - ".concat(Math.round(v).toFixed(4),"% - ").concat(Math.round(R).toFixed(4),"%)"))):("rtl"==t.opts.direction&&0!==n||"rtl"!=t.opts.direction&&0===n)&&(v=(s-a+e)/s*y,o.css("margin-left","calc(100% - ".concat(Math.round(v).toFixed(4),"% - ").concat(Math.round(x).toFixed(4),"%)"))),o.css("width","".concat(Math.round(v).toFixed(4),"%"))}t.selection.restore(),t.undo.saveStep(),t.events.trigger("table.resized",[o.get(0)])}l.removeData("origin"),l.removeData("release-position"),l.removeData("first"),l.removeData("second"),l.removeData("table")}(),H()}}}function F(e){if((!(c(e.currentTarget).is(c(e.originalEvent.relatedTarget))||e.currentTarget.contains(e.originalEvent.relatedTarget)||e.originalEvent.relatedTarget&&e.originalEvent.relatedTarget.contains(e.currentTarget))||e.currentTarget.querySelector("input, textarea"))&&(t.events.$on(c("input, textarea"),"click",er),!0===n&&0<t.opts.tableEditButtons.length)){if(c(e.currentTarget).closest("table").is(el()))return void I(s,e.currentTarget);"TD"!==e.currentTarget.tagName&&"TH"!==e.currentTarget.tagName&&N()}}function z(e,a,l,r){for(var n,o=a;o!=t.el&&"TD"!=o.tagName&&"TH"!=o.tagName&&("up"==r?n=o.previousElementSibling:"down"==r&&(n=o.nextElementSibling),!n);)o=o.parentNode;"TD"==o.tagName||"TH"==o.tagName?function(e,a){for(var l=e;l&&"TABLE"!=l.tagName&&l.parentNode!=t.el;)l=l.parentNode;if(l&&"TABLE"==l.tagName){var r=O(c(l));"up"==a?Y($(e,r),l,r):"down"==a&&W($(e,r),l,r)}}(o,r):n&&("up"==r&&t.selection.setAtEnd(n),"down"==r&&t.selection.setAtStart(n))}function Y(e,a,l){0<c(".tribute-container").length&&"none"!=c(".tribute-container").css("display")||(0<e.row?t.selection.setAtEnd(l[e.row-1][e.col]):z(0,a,0,"up"))}function W(e,a,l){if(!(0<c(".tribute-container").length&&"none"!=c(".tribute-container").css("display"))){var r=parseInt(l[e.row][e.col].getAttribute("rowspan"),10)||1;e.row<l.length-r?t.selection.setAtStart(l[e.row+r][e.col]):z(0,a,0,"down")}}function H(){l&&(l.find("div").css("opacity",0),l.css("top",0),l.css("left",0),l.css("height",0),l.find("div").css("height",0),l.hide())}function P(){r&&r.removeClass("fr-visible").css("left","-9999px")}function V(){d[t.id]&&(d[t.id].css("top",-9999),d[t.id].css("left",-9999),d[t.id].removeClass("fr-table-selector-active-selected"),d[t.id].removeClass("fr-table-selector-active"),d[t.id].addClass("fr-table-selector-inactive"),t.$el.find("table.fr-table-selection-hover").removeClass("fr-table-selection-hover"))}function j(){var e=t.$el.find("table.fr-table-selected");e.removeClass("fr-table-selected"),e.removeClass("fr-table-selection-hover"),V()}function X(e){t.$box.append(d[t.id]),d[t.id].data("instance",t);var a=e.offset().left-t.$box.offset().left+16,l=e.offset().top-t.$box.offset().top-d[t.id].outerHeight();if(t.opts.iframe){var r=t.helpers.getPX(t.$wp.find(".fr-iframe").css("padding-top")),n=t.helpers.getPX(t.$wp.find(".fr-iframe").css("padding-left"));a+=t.$iframe.offset().left-t.helpers.scrollLeft()+n,l+=t.$iframe.offset().top-t.helpers.scrollTop()+r}d[t.id].css("top",l),d[t.id].css("left",a)}function G(e){i=null;var a=t.doc.elementFromPoint(e.pageX-t.win.pageXOffset,e.pageY-t.win.pageYOffset);t.opts.tableResizer&&(!t.popups.areVisible()||t.popups.areVisible()&&t.popups.isVisible("table.edit"))&&function(e,a){var r,n=c(a);n&&(r=n.closest("table"));var o=r.parent();if(a&&"TD"!=a.tagName&&"TH"!=a.tagName&&(0<n.closest("td").length?a=n.closest("td"):0<n.closest("th").length&&(a=n.closest("th"))),a&&("TD"==a.tagName||"TH"==a.tagName)){if(n=c(a),0===t.$el.find(n).length)return 0;var s=n.offset().left-1,i=s+n.outerWidth();if(Math.abs(e.pageX-s)<=t.opts.tableResizerOffset||Math.abs(i-e.pageX)<=t.opts.tableResizerOffset){var d,p,h,g,u,b,m=O(r),v=$(a,m),C=T(v.row,v.col,m),w=r.offset().top,E=r.outerHeight()-1;"rtl"!=t.opts.direction?e.pageX-s<=t.opts.tableResizerOffset?(g=s,0<v.col?(u=s-q(v.col-1,m)+t.opts.tableResizingLimit,b=s+q(v.col,m)-t.opts.tableResizingLimit,p=v.col-1,h=v.col):(p=null,h=0,u=r.offset().left-1-parseInt(r.css("margin-left"),10),b=r.offset().left-1+r.width()-m[0].length*t.opts.tableResizingLimit)):i-e.pageX<=t.opts.tableResizerOffset&&(g=i,C.col<m[C.row].length&&m[C.row][C.col+1]?(u=i-q(C.col,m)+t.opts.tableResizingLimit,b=i+q(C.col+1,m)-t.opts.tableResizingLimit,p=C.col,h=C.col+1):(p=C.col,h=null,u=r.offset().left-1+m[0].length*t.opts.tableResizingLimit,b=o.offset().left-1+o.width()+parseFloat(o.css("padding-left")))):i-e.pageX<=t.opts.tableResizerOffset?(g=i,0<v.col?(u=i-q(v.col,m)+t.opts.tableResizingLimit,b=i+q(v.col-1,m)-t.opts.tableResizingLimit,p=v.col,h=v.col-1):(p=null,h=0,u=r.offset().left+m[0].length*t.opts.tableResizingLimit,b=o.offset().left-1+o.width()+parseFloat(o.css("padding-left")))):e.pageX-s<=t.opts.tableResizerOffset&&(g=s,C.col<m[C.row].length&&m[C.row][C.col+1]?(u=s-q(C.col+1,m)+t.opts.tableResizingLimit,b=s+q(C.col,m)-t.opts.tableResizingLimit,p=C.col+1,h=C.col):(p=C.col,h=null,u=o.offset().left+parseFloat(o.css("padding-left")),b=r.offset().left-1+r.width()-m[0].length*t.opts.tableResizingLimit)),l||(t.shared.$table_resizer||(t.shared.$table_resizer=c(document.createElement("div")).attr("class","fr-table-resizer").html("<div></div>")),l=t.shared.$table_resizer,t.events.$on(l,"mousedown",function(e){return!t.core.sameInstance(l)||(0<ea().length&&K(),1==e.which?(t.selection.save(),f=!0,l.addClass("fr-moving"),N(),t.edit.off(),l.find("div").css("opacity",1),!1):void 0)}),t.events.$on(l,"mousemove",function(e){if(!t.core.sameInstance(l))return!0;f&&(t.opts.iframe&&(e.pageX-=t.$iframe.offset().left),Z(e))}),d=function(e){f&&B(e)},window.addEventListener("mouseup",d,!0),t.events.on("destroy",function(){window.removeEventListener("mouseup",d,!0)},!0),t.events.on("shared.destroy",function(){l.html("").removeData().remove(),l=null},!0),t.events.on("destroy",function(){t.$el.find(".fr-selected-cell").removeClass("fr-selected-cell"),c("body").first().append(l.hide())},!0)),l.data("table",r),l.data("first",p),l.data("second",h),l.data("instance",t),t.$wp.append(l);var y=g-t.win.pageXOffset-t.opts.tableResizerOffset-t.$wp.offset().left,R=w-t.$wp.offset().top+t.$wp.scrollTop();if(t.opts.iframe){var x=t.helpers.getPX(t.$wp.find(".fr-iframe").css("padding-top")),A=t.helpers.getPX(t.$wp.find(".fr-iframe").css("padding-left"));y+=t.$iframe.offset().left+A,R+=t.$iframe.offset().top+x,u+=t.$iframe.offset().left,b+=t.$iframe.offset().left}l.data("max-left",u),l.data("max-right",b),l.data("origin",g-t.win.pageXOffset),l.css("top",R),l.css("left",y),l.css("height",E),l.find("div").css("height",E),l.css("padding-left",t.opts.tableResizerOffset),l.css("padding-right",t.opts.tableResizerOffset),l.show()}else t.core.sameInstance(l)&&H()}else l&&n.get(0)!=l.get(0)&&n.parent().get(0)!=l.get(0)&&t.core.sameInstance(l)&&H()}(e,a),!t.opts.tableInsertHelper||t.popups.areVisible()||t.$tb.hasClass("fr-inline")&&t.$tb.isVisible()||function(e,a){if(0===ea().length){var l,n,o;if(a&&("HTML"==a.tagName||"BODY"==a.tagName||t.node.isElement(a)))for(l=1;l<=t.opts.tableInsertHelperOffset;l++){if(c(n=t.doc.elementFromPoint(e.pageX-t.win.pageXOffset,e.pageY-t.win.pageYOffset+l)).hasClass("fr-tooltip"))return!0;if(n&&("TH"==n.tagName||"TD"==n.tagName||"TABLE"==n.tagName)&&(c(n).parents(".fr-wrapper").length||t.opts.iframe)&&"false"!=c(n).closest("table").attr("contenteditable"))return function(e,a){if(t.$box.find(".fr-line-breaker").isVisible())return 0;r||ee(),t.$box.append(r),r.data("instance",t);var l,n=c(a).find("tr").first(),o=e.pageX,s=0,i=0;if(t.opts.iframe){var f=t.helpers.getPX(t.$wp.find(".fr-iframe").css("padding-top")),d=t.helpers.getPX(t.$wp.find(".fr-iframe").css("padding-left"));s+=t.$iframe.offset().left-t.helpers.scrollLeft()+d,i+=t.$iframe.offset().top-t.helpers.scrollTop()+f}n.find("th, td").each(function(){var e=c(this);return e.offset().left<=o&&o<e.offset().left+e.outerWidth()/2?(l=parseInt(r.find("a").css("width"),10),r.css("top",i+e.offset().top-t.$box.offset().top-l-5),r.css("left",s+e.offset().left-t.$box.offset().left-l/2),r.data("selected-cell",e),r.data("position","before"),r.addClass("fr-visible"),!1):e.offset().left+e.outerWidth()/2<=o&&o<e.offset().left+e.outerWidth()?(l=parseInt(r.find("a").css("width"),10),r.css("top",i+e.offset().top-t.$box.offset().top-l-5),r.css("left",s+e.offset().left-t.$box.offset().left+e.outerWidth()-l/2),r.data("selected-cell",e),r.data("position","after"),r.addClass("fr-visible"),!1):void 0})}(e,c(n).closest("table")),!0;if(c(o=t.doc.elementFromPoint(e.pageX-t.win.pageXOffset+l,e.pageY-t.win.pageYOffset)).hasClass("fr-tooltip"))return!0;if(o&&("TH"==o.tagName||"TD"==o.tagName||"TABLE"==o.tagName)&&(c(o).parents(".fr-wrapper").length||t.opts.iframe)&&"false"!=c(o).closest("table").attr("contenteditable"))return function(e,a){if(t.$box.find(".fr-line-breaker").isVisible())return 0;r||ee(),t.$box.append(r),r.data("instance",t);var l,n=c(a),o=e.pageY,s=0,i=0;if(t.opts.iframe){var f=t.helpers.getPX(t.$wp.find(".fr-iframe").css("padding-top")),d=t.helpers.getPX(t.$wp.find(".fr-iframe").css("padding-left"));s+=t.$iframe.offset().left-t.helpers.scrollLeft()+d,i+=t.$iframe.offset().top-t.helpers.scrollTop()+f}n.find("tr").each(function(){var e=c(this);l=parseInt(r.find("a").css("width"),10);var a=s+e.offset().left-t.$box.offset().left;return a=0!==t.$box.offset().left?a-l-5:a+l-5,e.offset().top<=o&&o<e.offset().top+e.outerHeight()/2?(r.css("top",i+e.offset().top-t.$box.offset().top-l/2),r.css("left",a),r.data("selected-cell",e.find("td").first()),r.data("position","above"),r.addClass("fr-visible"),!1):e.offset().top+e.outerHeight()/2<=o&&o<e.offset().top+e.outerHeight()?(r.css("top",i+e.offset().top-t.$box.offset().top+e.outerHeight()-l/2),r.css("left",a),r.data("selected-cell",e.find("td").first()),r.data("position","below"),r.addClass("fr-visible"),!1):void 0})}(e,c(o).closest("table")),!0}t.core.sameInstance(r)&&P()}}(e,a),function(e,a){var l=c(a),r=t.$el.find("table.fr-table-selection-hover"),n=t.$el.find("table.fr-table-selected");if(t.node.isElement(a)||t.node.isElement(l.parents(".fr-view").first().get(0))||t.core.sameInstance(l)||t.core.sameInstance(l.parents("div.fr-table-selector"))){if(!l.parents(".fr-table-selector").length){var o=l.closest("table").filter(function(){return!(!t.$el||!t.$el.length)&&t.$el.get(0).contains(this)});o.length?(X(o),d[t.id].addClass("fr-table-selector-active"),d[t.id].removeClass("fr-table-selector-inactive"),r.removeClass("fr-table-selection-hover"),n.length&&d[t.id].toggleClass("fr-table-selector-active-selected",n.get(0)===o.get(0)),o.addClass("fr-table-selection-hover")):r.length&&16>Math.abs(r.offset().top-e.pageY)||d[t.id].hasClass("fr-table-selector-inactive")||V()}}else n.length||V()}(e,a)}function U(){if(f){var e=l.data("table").offset().top-t.win.pageYOffset;if(t.opts.iframe){var a=t.helpers.getPX(t.$wp.find(".fr-iframe").css("padding-top"));e+=t.$iframe.offset().top-t.helpers.scrollTop()+a}l.css("top",e)}}function q(e,t){var a,l=c(t[0][e]).outerWidth();for(a=1;a<t.length;a++)l=Math.min(l,c(t[a][e]).outerWidth());return l}function J(e,t,a){var l,r=0;for(l=e;l<=t;l++)r+=q(l,a);return r}function Z(e){if(1<ea().length&&o&&N(),!1===o&&!1===n&&!1===f)i&&clearTimeout(i),t.edit.isDisabled()&&!t.popups.isVisible("table.edit")||(i=setTimeout(G,30,e));else if(f){var a=e.pageX-t.win.pageXOffset;t.opts.iframe&&(a+=t.$iframe.offset().left);var r=l.data("max-left"),s=l.data("max-right");r<=a&&a<=s?l.css("left",a-t.opts.tableResizerOffset-t.$wp.offset().left):a<r&&parseFloat(l.css("left"),10)>r-t.opts.tableResizerOffset?l.css("left",r-t.opts.tableResizerOffset-t.$wp.offset().left):s<a&&parseFloat(l.css("left"),10)<s-t.opts.tableResizerOffset&&l.css("left",s-t.opts.tableResizerOffset-t.$wp.offset().left)}else o&&P()}function Q(a){t.node.isEmpty(a.get(0))?t.opts.keepTextFormatOnTable&&t.browser.mozilla?a.append(e.MARKERS):a.prepend(e.MARKERS):a.prepend(e.START_MARKER).append(e.END_MARKER)}function ee(){t.shared.$ti_helper||(t.shared.$ti_helper=c(document.createElement("div")).attr("class","fr-insert-helper").html('<a class="fr-floating-btn" role="button" tabIndex="-1" title="'.concat(t.language.translate("Insert"),'"><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22,16.75 L16.75,16.75 L16.75,22 L15.25,22.000 L15.25,16.75 L10,16.75 L10,15.25 L15.25,15.25 L15.25,10 L16.75,10 L16.75,15.25 L22,15.25 L22,16.75 Z"/></svg></a>')),t.events.bindClick(t.shared.$ti_helper,"a",function(){var e=r.data("selected-cell"),a=r.data("position"),l=r.data("instance")||t;"before"==a?(t.undo.saveStep(),e.addClass("fr-selected-cell"),l.table.insertColumn(a),e.removeClass("fr-selected-cell"),t.undo.saveStep()):"after"==a?(t.undo.saveStep(),e.addClass("fr-selected-cell"),l.table.insertColumn(a),e.removeClass("fr-selected-cell"),t.undo.saveStep()):"above"==a?(t.undo.saveStep(),e.addClass("fr-selected-cell"),l.table.insertRow(a),e.removeClass("fr-selected-cell"),t.undo.saveStep()):"below"==a&&(t.undo.saveStep(),e.addClass("fr-selected-cell"),l.table.insertRow(a),e.removeClass("fr-selected-cell"),t.undo.saveStep()),P()}),t.events.on("shared.destroy",function(){t.shared.$ti_helper.html("").removeData().remove(),t.shared.$ti_helper=null},!0),t.events.$on(t.shared.$ti_helper,"mousemove",function(e){e.stopPropagation()},!0),t.events.$on(c(t.o_win),"scroll",function(){P()},!0),t.events.$on(t.$wp,"scroll",function(){P()},!0)),r=t.shared.$ti_helper,t.events.on("destroy",function(){r=null}),t.tooltip.bind(t.$box,".fr-insert-helper > a.fr-floating-btn")}function et(){s=null,clearTimeout(i)}function ea(){return t.el.querySelectorAll(".fr-selected-cell")}function el(){var e=ea();if(e.length){for(var a=e[0];a&&"TABLE"!=a.tagName&&a.parentNode!=t.el;)a=a.parentNode;return a&&"TABLE"==a.tagName?c(a):c([])}return c([])}function er(){n=!1}return{_init:function(){if(!t.$wp)return!1;if(t.helpers.isMobile()&&(t.events.$on(t.$el,"mousedown",L),t.events.$on(t.$win,"mouseup",B)),!t.helpers.isMobile()){f=n=o=!1,t.events.$on(t.$el,"mousedown",L),t.popups.onShow("image.edit",function(){S(),n=o=!1}),t.popups.onShow("link.edit",function(){S(),n=o=!1}),t.events.$on(t.$el,"mouseover","th, td",F),t.events.$on(t.$win,"mouseup",B),t.opts.iframe&&t.events.$on(c(t.o_win),"mouseup",B),t.events.$on(t.$win,"mousemove",Z),t.events.$on(c(t.o_win),"scroll",U),t.events.on("contentChanged",function(){0<ea().length&&(p(),t.$el.find("img").on("load.selected-cells",function(){c(this).off("load.selected-cells"),0<ea().length&&p()}))}),t.events.$on(c(t.o_win),"resize",function(){S()}),t.events.on("toolbar.esc",function(){if(0<ea().length)return t.events.disableBlur(),t.events.focus(),!1},!0),t.events.$on(c(t.o_win),"keydown",function(){o&&n&&(n=o=!1,t.$el.removeClass("fr-no-selection"),t.edit.on(),t.selection.setAtEnd(t.$el.find(".fr-selected-cell").last().get(0)),t.selection.restore(),S())}),t.events.$on(t.$el,"keydown",function(a){a.shiftKey?!1===function(a){var l=ea();if(null!=l&&0<l.length){var r,n=O(),o=a.which,s=$(1==l.length?r=l[0]:(r=t.el.querySelector(".fr-cell-fixed"),t.el.querySelector(".fr-cell-handler")),n);if(e.KEYCODE.ARROW_RIGHT==o){if(s.col<n[0].length-1)return I(r,n[s.row][s.col+1]),!1}else if(e.KEYCODE.ARROW_DOWN==o){if(s.row<n.length-1)return I(r,n[s.row+1][s.col]),!1}else if(e.KEYCODE.ARROW_LEFT==o){if(0<s.col)return I(r,n[s.row][s.col-1]),!1}else if(e.KEYCODE.ARROW_UP==o&&0<s.row)return I(r,n[s.row-1][s.col]),!1}}(a)&&setTimeout(function(){p()},0):function(a){var l=a.which,r=t.selection.blocks();if(r.length&&("P"!==(r=r[0]).tagName&&"DIV"!==r.tagName||(r=r.parentNode),"TD"==r.tagName||"TH"==r.tagName)){for(var n=r;n&&"TABLE"!=n.tagName&&n.parentNode!=t.el;)n=n.parentNode;if(n&&"TABLE"==n.tagName&&(e.KEYCODE.ARROW_LEFT==l||e.KEYCODE.ARROW_UP==l||e.KEYCODE.ARROW_RIGHT==l||e.KEYCODE.ARROW_DOWN==l)&&(0<ea().length&&K(),t.browser.webkit&&(e.KEYCODE.ARROW_UP==l||e.KEYCODE.ARROW_DOWN==l))){var o=t.selection.ranges(0).startContainer;if(o.nodeType==Node.TEXT_NODE&&(e.KEYCODE.ARROW_UP==l&&(o.previousSibling&&"BR"!==o.previousSibling.tagName||o.previousSibling&&"BR"===o.previousSibling.tagName&&o.previousSibling.previousSibling)||e.KEYCODE.ARROW_DOWN==l&&(o.nextSibling&&"BR"!==o.nextSibling.tagName||o.nextSibling&&"BR"===o.nextSibling.tagName&&o.nextSibling.nextSibling)))return;a.preventDefault(),a.stopPropagation();var s=O(c(n)),i=$(r,s);return e.KEYCODE.ARROW_UP==l?Y(i,n,s):e.KEYCODE.ARROW_DOWN==l&&W(i,n,s),t.selection.restore(),!1}}}(a)}),t.events.on("keydown",function(a){if(!1===function(a){if(a.which==e.KEYCODE.TAB){var l;if(0<ea().length)l=t.$el.find(".fr-selected-cell").last();else{var r=t.selection.element();"TD"==r.tagName||"TH"==r.tagName?l=c(r):r!=t.el&&(0<c(r).parentsUntil(t.$el,"td").length?l=c(r).parents("td").first():0<c(r).parentsUntil(t.$el,"th").length&&(l=c(r).parents("th").first()))}if(l)return a.preventDefault(),!!(0===t.selection.get().focusOffset&&0<c(t.selection.element()).parentsUntil(t.$el,"ol, ul").length&&(0<c(t.selection.element()).closest("li").prev().length||c(t.selection.element()).is("li")&&0<c(t.selection.element()).prev().length))||(K(),a.shiftKey?0<l.prev().length?Q(l.prev()):0<l.closest("tr").length&&0<l.closest("tr").prev().length?Q(l.closest("tr").prev().find("td").last()):0<l.closest("tbody").length&&0<l.closest("table").find("thead tr").length&&Q(l.closest("table").find("thead tr th").last()):0<l.next().length?Q(l.next()):0<l.closest("tr").length&&0<l.closest("tr").next().length?Q(l.closest("tr").next().find("td").first()):0<l.closest("thead").length&&0<l.closest("table").find("tbody tr").length?Q(l.closest("table").find("tbody tr td").first()):(l.addClass("fr-selected-cell"),w("below"),S(),Q(l.closest("tr").next().find("td").first())),t.selection.restore(),!1)}}(a))return!1;if(a.which==e.KEYCODE.ESC&&j(),t.$el.find("table.fr-table-selected").length){if(!a.ctrlKey&&!a.metaKey)return a.preventDefault(),a.stopPropagation(),!1;"a"===a.key&&j()}var l=ea();if(0<l.length){if(0<l.length&&t.keys.ctrlKey(a)&&a.which==e.KEYCODE.A)return S(),t.popups.isVisible("table.edit")&&t.popups.hide("table.edit"),l=[],!0;if(a.which==e.KEYCODE.ESC&&t.popups.isVisible("table.edit"))return S(),t.popups.hide("table.edit"),a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),l=[],!1;if(1<l.length&&(a.which==e.KEYCODE.BACKSPACE||a.which==e.KEYCODE.DELETE)){t.undo.saveStep();for(var r=0;r<l.length;r++)c(l[r]).html("<br>"),r==l.length-1&&c(l[r]).prepend(e.MARKERS);return t.selection.restore(),t.undo.saveStep(),l=[],!1}if(1<l.length&&a.which!=e.KEYCODE.F10&&!t.keys.isBrowserAction(a))return a.preventDefault(),l=[],!1}else if(l=[],!1===function(a){if(a.altKey&&a.which==e.KEYCODE.SPACE){var l,r=t.selection.element();if("TD"==r.tagName||"TH"==r.tagName?l=r:0<c(r).closest("td").length?l=c(r).closest("td").get(0):0<c(r).closest("th").length&&(l=c(r).closest("th").get(0)),l)return a.preventDefault(),I(l,l),p(),!1}}(a))return!1},!0);var a,l,r,s=null,i=[];t.events.on("html.beforeGet",function(){i=ea();for(var e=0;e<i.length;e++)i[e].className=(i[e].className||"").replace(/fr-selected-cell/g,"");(s=t.$el.find("table.fr-table-selected"))&&s.length&&s.removeClass("fr-table-selected")}),t.events.on("html.afterGet",function(){for(var e=0;e<i.length;e++)i[e].className=(i[e].className?i[e].className.trim()+" ":"")+"fr-selected-cell";i=[],s&&s.length&&s.addClass("fr-table-selected")});var h=!1,u=["applytextColor","bold","italic","underline","strikeThrough","subscript","superscript","fontFamily","fontSize","applybackgroundColor","inlineClass","inlineStyle","alignLeft","alignCenter","formatOLSimple","alignRight","alignJustify","formatOL","formatUL","paragraphFormat","paragraphStyle","lineHeight","outdent","indent","quote","clearFormatting"];t.events.on("commands.before",function(a,l){if(!h&&1<ea().length&&-1!==u.indexOf(a)){t.undo.saveStep(),t.selection.save(),t.$el.find(".fr-marker").removeClass("fr-marker").addClass("fr-marker-placeholder");var r=e.COMMANDS[a].undo;e.COMMANDS[a].undo=!1,h=!0;for(var n={},o=0;o<ea().length;o++){var s=ea()[o],i=s.closest("tr").rowIndex;n[i]||(n[i]=[]),n[i].push(s)}for(var f in n){var c=n[f];t.selection.get().removeAllRanges();var d=t.doc.createRange();d.setStartBefore(c[0]),d.setEndAfter(c[c.length-1]),t.selection.get().addRange(d),t.commands.exec(a,[l])}return t.$el.find(".fr-marker-placeholder").addClass("fr-marker").removeClass("fr-marker-placeholder"),t.selection.restore(),t.undo.saveStep(),e.COMMANDS[a].undo=r,h=!1}}),g(!0),b(!0),d[t.id]||(d[t.id]=c(document.createElement("div")).attr("class","fr-table-selector").html('<a role="button" tabIndex="-1" title="'.concat(t.language.translate("Select Table"),'"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="').concat(e.SVG.tableSelectorIcon,'"/></svg></a>'))),a=t.language.translate("The content you are pasting does not contain a table.\nPlease ensure the copied content is in table format."),t.events.on("paste.before",function(e,l){if(t.$el.find("table.fr-table-selected").length){var r=l||e&&e.clipboardData;if(r&&r.items){var n=(r||window.clipboardData).getData("text/html")||"";if(!n||-1===n.indexOf("<table"))return alert(a),e.preventDefault(),e.stopPropagation(),!1}}return!0}),t.events.on("html.beforeInsert",function(e){var l=t.$el.find("table.fr-table-selected");if(l.length){var r=function(e){var a=t.doc.createElement("div");a.innerHTML=e;for(var l=a.firstChild;l;){var r=l.nextSibling;(l.nodeType===Node.TEXT_NODE&&""===l.textContent.replace(/\u200b/g,"").trim()||l.nodeType===Node.COMMENT_NODE||"SPAN"===l.tagName&&""===l.textContent.replace(/\u200b/g,"").trim())&&l.remove(),l=r}return 1===a.childNodes.length&&"TABLE"===a.childNodes[0].tagName&&a.childNodes[0]}(e);return r?(function(e,t){for(var a=t.get(0),l=a.rows[0].cells[0],r=l&&l.parentNode?l.parentNode.rowIndex:0,n=l?l.cellIndex:0,o=a.rows,s=e.rows,i=0;i<e.rows.length;i++){if(!o[r+i])for(var f=o[o.length-1].cells.length,c=a.insertRow(),d=0;d<f;d++)c.insertCell();for(var p=o[r+i],h=0;h<e.rows[i].cells.length;h++){if(!p.cells[n+h])for(var g=0;g<o.length;g++)o[g].insertCell();var u=p.cells[n+h],b=s[i].cells[h];u.outerHTML=b.outerHTML}}}(r,l),t.keys.positionCaret(),t.events.trigger("html.inserted")):alert(a),!1}return!0}),t.events.on("mousedown",function(){j()}),t.events.$on(c(t.o_win),"resize",function(){var e=t.$el.find("table.fr-table-selected");e.length?X(e):j()}),t.events.on("commands.undo commands.redo commands.before",function(e){/^align/.test(e)||j()}),l=null,r=null,t.events.on("snapshot.before",function(){r=t.$el.find("table.fr-table-selection-hover"),l=t.$el.find("table.fr-table-selected"),r.removeClass("fr-table-selection-hover"),l.removeClass("fr-table-selected")}),t.events.on("snapshot.after",function(){l&&l.addClass("fr-table-selected"),r&&r.addClass("fr-table-selection-hover")}),t.events.$on(d[t.id],"click",function(){var e=t.$el.find("table.fr-table-selection-hover");if(e.length){t.$el.find("table.fr-table-selected").removeClass("fr-table-selected"),d[t.id].addClass("fr-table-selector-active-selected"),e.addClass("fr-table-selected"),e.removeClass("fr-table-selection-hover");var a=t.doc.createRange();t.selection.get().removeAllRanges(),a.setStart(e.get(0),0),a.setEnd(e.get(0),0),t.selection.get().addRange(a),t.$el.focus()}}),t.events.on("destroy",function(){j(),d[t.id]=null})}t.events.on("destroy",et)},insert:function(a,l){var r,n,o,s=(r={startTag:"",closeTag:""},t.opts.keepTextFormatOnTable&&(r=v(c(t.selection.element().firstChild).parentsUntil(t.$el))),{startTag:r.startTag,closeTag:r.closeTag}),i="<table "+(t.opts.tableDefaultWidth?'style="width: '+t.opts.tableDefaultWidth+';" ':"")+'class="fr-inserted-table"><tbody>',f=100/l;for(n=0;n<a;n++){for(i+="<tr>",o=0;o<l;o++)i+="<td"+(t.opts.tableDefaultWidth?' style="width: '+f.toFixed(4)+'%;"':"")+">"+s.startTag,0===n&&0===o&&(i+=e.MARKERS),i+="<br>"+s.closeTag+"</td>";i+="</tr>"}if(i+="</tbody></table>",t.opts.trackChangesEnabled){t.edit.on(),t.events.focus(!0),t.selection.restore(),t.undo.saveStep(),t.markers.insert(),t.html.wrap();var d=t.$el.find(".fr-marker");t.node.isLastSibling(d)&&d.parent().hasClass("fr-deletable")&&d.insertAfter(d.parent()),d.replaceWith(i),t.selection.clear()}else t.html.insert(i);t.selection.restore();var p=t.$el.find(".fr-inserted-table");p.removeClass("fr-inserted-table"),t.events.trigger("table.inserted",[p.get(0)])},remove:C,insertRow:w,deleteRow:function(){var e=el();if(0<e.length){var a,l,r,n=O(),o=_(n);if(null==o)return;if(0===o.min_i&&o.max_i==n.length-1)C();else{for(a=o.max_i;a>=o.min_i;a--){for(r=c(e.find("tr").not(e.find("> table tr")).get(a)),l=0;l<n[a].length;l++)if(0===l||n[a][l]!=n[a][l-1]){var s,i,f=c(n[a][l]);if(1<parseInt(f.attr("rowspan"),10)){var d=parseInt(f.attr("rowspan"),10)-1;1==d?f.removeAttr("rowspan"):f.attr("rowspan",d)}if(a<n.length-1&&n[a][l]==n[a+1][l]&&(0===a||n[a][l]!=n[a-1][l])){for(var p=n[a][l],h=l;0<h&&n[a][h]==n[a][h-1];)h--;0===h?c(e.find("tr").not(e.find("> table tr")).get(a+1)).prepend(p):c(n[a+1][h-1])[0].parentNode&&c(n[a+1][h-1])[0].insertAdjacentElement("afterend",p)}}var g=r.parent();r.remove(),0===g.find("tr").length&&g.remove(),n=O(e)}s=n.length-1,i=n[0].length-1,y(0,s,e),E(0,i,e),0<o.min_i?t.selection.setAtEnd(n[o.min_i-1][0]):t.selection.setAtEnd(n[0][0]),t.selection.restore(),t.popups.hide("table.edit")}}},insertColumn:function(e){var a=el();if(0<a.length){var l,r=O(),n=_(r);l="before"==e?n.min_j:n.max_j;var o,s=100/r[0].length,i=100/(r[0].length+1);a.find("th, td").each(function(){(o=c(this)).data("old-width",o.outerWidth()/a.outerWidth()*100)}),a.find("tr").not(a.find("> table tr")).each(function(t){for(var a,n=c(this),o=0,f=0;o-1<l;){if(!(a=n.find("> th, > td").get(f))){a=null;break}a==r[t][o]?(o+=parseInt(c(a).attr("colspan"),10)||1,f++):(o+=parseInt(c(r[t][o]).attr("colspan"),10)||1,"after"==e&&(a=0===f?-1:n.find("> th, > td").get(f-1)))}var d=c(a);if("after"==e&&l<o-1||"before"==e&&0<l&&r[t][l]==r[t][l-1]){if(0===t||0<t&&r[t][l]!=r[t-1][l]){var p=parseInt(d.attr("colspan"),10)+1;d.attr("colspan",p),d.css("width",(d.data("old-width")*i/s+i).toFixed(4)+"%"),d.removeData("old-width")}}else{var h,g=(d.get(0)||"").tagName;if(0<n.find("th").length&&"TH"===g)h='<th style="width: '.concat(i.toFixed(4),'%;"><br></th>');else{var u=m(r[t][l]);h='<td style="'.concat(d.attr("style"),"; width: ").concat(i.toFixed(4),'%;">')+u.startTag+"<br>"+u.closeTag+"</td>"}c(h).append("<br>"),c(h).css("width","".concat(i.toFixed(4),"%")),-1==a?n.prepend(h):null==a?n.append(h):"before"==e?d.before(h):"after"==e&&d.after(h)}}),a.find("th, td").each(function(){(o=c(this)).data("old-width")&&(o.css("width",(o.data("old-width")*i/s).toFixed(4)+"%"),o.removeData("old-width"))}),t.popups.isVisible("table.edit")&&p()}},deleteColumn:function(){var e=el();if(0<e.length){var a,l,r,n=O(),o=_(n);if(null==o)return;if(0===o.min_j&&o.max_j==n[0].length-1)C();else{var s,i,f=0;for(a=0;a<n.length;a++)for(l=0;l<n[0].length;l++)(r=c(n[a][l])).hasClass("fr-selected-cell")||(r.data("old-width",r.outerWidth()/e.outerWidth()*100),(l<o.min_j||l>o.max_j)&&(f+=r.outerWidth()/e.outerWidth()*100));for(f/=n.length,l=o.max_j;l>=o.min_j;l--)for(a=0;a<n.length;a++)if(0===a||n[a][l]!=n[a-1][l]){if(1<(parseInt((r=c(n[a][l])).attr("colspan"),10)||1)){var d=parseInt(r.attr("colspan"),10)-1;1==d?r.removeAttr("colspan"):r.attr("colspan",d),r.css("width",(100*(r.data("old-width")-q(l,n))/f).toFixed(4)+"%"),r.removeData("old-width")}else{var p=c(r.parent().get(0));r.remove(),0===p.find("> th, > td").length&&(0===p.prev().length||0===p.next().length||p.prev().find("> th[rowspan], > td[rowspan]").length<p.prev().find("> th, > td").length)&&p.remove()}}s=n.length-1,i=n[0].length-1,y(0,s,e),E(0,i,e),0<o.min_j?t.selection.setAtEnd(n[o.min_i][o.min_j-1]):t.selection.setAtEnd(n[o.min_i][0]),t.selection.restore(),t.popups.hide("table.edit"),e.find("th, td").each(function(){(r=c(this)).data("old-width")&&(r.css("width",(100*r.data("old-width")/f).toFixed(4)+"%"),r.removeData("old-width"))})}}},mergeCells:function(){if(1<ea().length&&(0===t.$el.find("th.fr-selected-cell").length||0===t.$el.find("td.fr-selected-cell").length)){D();var e,a,l=_(O());if(null!=l){var r=t.$el.find(".fr-selected-cell"),n=c(r[0]),o=n.parent().find(".fr-selected-cell"),s=n.closest("table"),i=n.html(),f=0;for(e=0;e<o.length;e++)f+=c(o[e]).outerWidth();for(n.css("width",Math.min(100,f/s.outerWidth()*100).toFixed(4)+"%"),l.min_j<l.max_j&&n.attr("colspan",l.max_j-l.min_j+1),l.min_i<l.max_i&&n.attr("rowspan",l.max_i-l.min_i+1),e=1;e<r.length;e++)"<br>"!=(a=c(r[e])).html()&&""!==a.html()&&(i+="<br>".concat(a.html())),a.remove();n.html(i),t.selection.setAtEnd(n.get(0)),t.selection.restore(),t.toolbar.enable(),y(l.min_i,l.max_i,s);var d=s.find("tr:empty");for(e=d.length-1;0<=e;e--)c(d[e]).remove();E(l.min_j,l.max_j,s),p()}}},splitCellVertically:function(){if(1==ea().length){var e,a=t.$el.find(".fr-selected-cell"),l=parseInt(a.attr("colspan"),10)||1,r=a.parent().outerWidth(),n=a.outerWidth(),o=a.clone().html("<br>"),s=O(),i=$(a.get(0),s);if(1<l){var f=Math.ceil(l/2);n=J(i.col,i.col+f-1,s)/r*100;var d=J(i.col+f,i.col+l-1,s)/r*100;1<f?a.attr("colspan",f):a.removeAttr("colspan"),1<l-f?o.attr("colspan",l-f):o.removeAttr("colspan"),a.css("width",n.toFixed(4)+"%"),o.css("width",d.toFixed(4)+"%")}else{for(e=0;e<s.length;e++)if(0===e||s[e][i.col]!=s[e-1][i.col]){var p=c(s[e][i.col]);if(!p.is(a)){var h=(parseInt(p.attr("colspan"),10)||1)+1;p.attr("colspan",h)}}n=n/r*100/2,a.css("width","".concat(n.toFixed(4),"%")),o.css("width","".concat(n.toFixed(4),"%"))}a[0].parentNode&&a[0].insertAdjacentElement("afterend",o[0]),S(),t.popups.hide("table.edit")}},splitCellHorizontally:function(){if(1==ea().length){var e=t.$el.find(".fr-selected-cell"),a=e.parent(),l=e.closest("table"),r=parseInt(e.attr("rowspan"),10),n=O(),o=$(e.get(0),n),s=e.clone().html("<br>");if(1<r){var i=Math.ceil(r/2);1<i?e.attr("rowspan",i):e.removeAttr("rowspan"),1<r-i?s.attr("rowspan",r-i):s.removeAttr("rowspan");for(var f=o.row+i,d=0===o.col?o.col:o.col-1;0<=d&&(n[f][d]==n[f][d-1]||0<f&&n[f][d]==n[f-1][d]);)d--;-1==d?c(l.find("tr").not(l.find("> table tr")).get(f)).prepend(s):c(n[f][d])[0].parentNode&&c(n[f][d])[0].insertAdjacentElement("afterend",s[0])}else{var p,h=c(document.createElement("tr")).append(s);for(p=0;p<n[0].length;p++)if(0===p||n[o.row][p]!=n[o.row][p-1]){var g=c(n[o.row][p]);g.is(e)||g.attr("rowspan",(parseInt(g.attr("rowspan"),10)||1)+1)}a[0].parentNode&&a[0].insertAdjacentElement("afterend",h[0])}S(),t.popups.hide("table.edit")}},addHeader:function(){var e=el();if(0<e.length&&0===e.find("> th").length){var t,a="<thead><tr>",l=0;for(l=e.find("tr").first().find("> th").length,e.find("tr").first().find("> td").each(function(){var e=c(this);l+=parseInt(e.attr("colspan"),10)||1}),t=0;t<l;t++)a+="<th><br></th>";a+="</tr></thead>",e.prepend(a),p()}},addFooter:function(){var e=el();if(0<e.length&&0===e.find("tfoot").length){var t="<tfoot><tr>",a=0,l=e.find("thead tr").first();0===l.length&&(l=e.find("tbody tr").first()),l.find("th, td").each(function(){a+=parseInt(c(this).attr("colspan"),10)||1});for(var r=0;r<a;r++)t+="<td><br></td>";t+="</tr></tfoot>",e.append(t),p()}},removeHeader:function(){var e=el(),a=e.find("> thead");if(0<(a=c(a)).length){if(0===e.find("tbody tr").length)C();else if(a.remove(),0<ea().length)p();else{t.popups.hide("table.edit");var l=e.find("tbody tr").first().find("td").first().get(0);l&&(t.selection.setAtEnd(l),t.selection.restore())}}},removeFooter:function(){var e=el(),a=e.find("tfoot");if(0<a.length){if(0===e.find("tbody tr").length)C();else if(a.remove(),0<ea().length)p();else{t.popups.hide("table.edit");var l=e.find("tbody tr").first().find("td").first().get(0);l&&(t.selection.setAtEnd(l),t.selection.restore())}}},setBackground:x,showInsertPopup:function(){var e=t.$tb.find('.fr-command[data-cmd="insertTable"]'),a=t.popups.get("table.insert");if(a||(a=g()),!a.hasClass("fr-active")){t.popups.refresh("table.insert"),t.popups.setContainer("table.insert",t.$tb);var l=t.button.getPosition(e),r=l.left,n=l.top;t.popups.show("table.insert",r,n,e.outerHeight())}},showEditPopup:p,showColorsPopup:function a(){var l=O();if(l){var r,n,o,s,i,f,d,p,h=t.popups.get("table.colors");h||(r="",0<t.opts.tableColorsButtons.length&&(r='<div class="fr-buttons fr-tabs">'.concat(t.button.buildList(t.opts.tableColorsButtons),"</div>")),n="",t.opts.colorsHEXInput&&(n='<div class="fr-color-hex-layer fr-table-colors-hex-layer fr-active fr-layer" id="fr-table-colors-hex-layer-'.concat(t.id,'"><div class="fr-input-line"><input maxlength="7" id="fr-table-colors-hex-layer-text-').concat(t.id,'" type="text" placeholder="').concat(t.language.translate("HEX Color"),'" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="tableCellBackgroundCustomColor" tabIndex="2" role="button">').concat(t.language.translate("OK"),"</button></div></div>")),o={buttons:r,colors:function(){for(var e='<div class="fr-color-set fr-table-colors">',a=0;a<t.opts.tableColors.length;a++)0!==a&&a%t.opts.tableColorsStep==0&&(e+="<br>"),"REMOVE"!=t.opts.tableColors[a]?e+='<span class="fr-command" style="background: '.concat(t.opts.tableColors[a],';" tabIndex="-1" role="button" data-cmd="tableCellBackgroundColor" data-param1="').concat(t.opts.tableColors[a],'"><span class="fr-sr-only">').concat(t.language.translate("Color")," ").concat(t.opts.tableColors[a],"&nbsp;&nbsp;&nbsp;</span></span>"):e+='<span class="fr-command" data-cmd="tableCellBackgroundColor" tabIndex="-1" role="button" data-param1="REMOVE" title="'.concat(t.language.translate("Clear Formatting"),'">').concat(t.icon.create("tableColorRemove"),'<span class="fr-sr-only">').concat(t.language.translate("Clear Formatting"),"</span></span>");return e+"</div>"}(),custom_color:n},s=t.popups.create("table.colors",o),t.events.$on(t.$wp,"scroll.table-colors",function(){t.popups.isVisible("table.colors")&&a()}),t.events.on("popup.tab",function(a){var l=c(a.currentTarget);if(!t.popups.isVisible("table.colors")||!l.is("span"))return!0;var r=a.which,n=!0;if(e.KEYCODE.TAB==r){var o=s.find(".fr-buttons");n=!t.accessibility.focusToolbar(o,!!a.shiftKey)}else if(e.KEYCODE.ARROW_UP==r||e.KEYCODE.ARROW_DOWN==r||e.KEYCODE.ARROW_LEFT==r||e.KEYCODE.ARROW_RIGHT==r){var i=l.parent().find("span.fr-command"),f=i.index(l),d=t.opts.colorsStep,p=Math.floor(i.length/d),h=Math.floor(f/d)*d+f%d,g=p*d;e.KEYCODE.ARROW_UP==r?h=((h-d)%g+g)%g:e.KEYCODE.ARROW_DOWN==r?h=(h+d)%g:e.KEYCODE.ARROW_LEFT==r?h=((h-1)%g+g)%g:e.KEYCODE.ARROW_RIGHT==r&&(h=(h+1)%g);var u=c(i.get(h));t.events.disableBlur(),u.focus(),n=!1}else e.KEYCODE.ENTER==r&&(t.button.exec(l),n=!1);return!1===n&&(a.preventDefault(),a.stopPropagation()),n},!0),h=s),t.popups.setContainer("table.colors",t.$sc);var g=M(l),u=(g.left+g.right)/2,b=g.bottom;i=t.popups.get("table.colors"),f=t.$el.find(".fr-selected-cell").first(),d=t.helpers.RGBToHex(f.css("background-color")),p=i.find(".fr-table-colors-hex-layer input"),i.find(".fr-selected-color").removeClass("fr-selected-color fr-active-item"),i.find('span[data-param1="'.concat(d,'"]')).addClass("fr-selected-color fr-active-item"),p.val(d).trigger("change"),t.popups.show("table.colors",u,b,g.bottom-g.top,!0)}},back:function(){0<ea().length?p():(t.popups.hide("table.insert"),t.toolbar.showInline())},verticalAlign:function(e){t.$el.find(".fr-selected-cell").css("vertical-align",e)},horizontalAlign:function(e){t.$el.find(".fr-selected-cell").css("text-align",e)},applyStyle:function(e,a,l,r){if(0<a.length){if(t.opts.useClasses||("TABLE"===a.get(0).tagName?function e(t,a){var l=t.childNodes;if(0<l.length)for(var r=0;r<l.length;r++)"TD"===l[r].tagName?"fr-dashed-borders"===a||"fr-highlighted"===a||"fr-thick"===a?A(l[r]):"fr-alternate-rows"===a&&l[r].style.removeProperty("background-color"):e(l[r],a)}(a.get(0),e):A(a.get(0))),!l){var n=Object.keys(r);n.splice(n.indexOf(e),1),a.removeClass(n.join(" "))}a.toggleClass(e)}},selectedTable:el,selectedCells:ea,customColor:function(){var e=t.popups.get("table.colors").find(".fr-table-colors-hex-layer input");e.length&&x(e.val())},selectCells:I}},e.DefineIcon("insertTable",{NAME:"table",SVG_KEY:"insertTable"}),e.RegisterCommand("insertTable",{title:"Insert Table",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("table.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("table.insert")):this.table.showInsertPopup()},plugin:"table"}),e.RegisterCommand("tableInsert",{callback:function(e,t,a){this.table.insert(t,a),this.popups.hide("table.insert")}}),e.DefineIcon("tableHeader",{NAME:"header",FA5NAME:"heading",SVG_KEY:"tableHeader"}),e.RegisterCommand("tableHeader",{title:"Table Header",focus:!1,toggle:!0,callback:function(){this.popups.get("table.edit").find('.fr-command[data-cmd="tableHeader"]').hasClass("fr-active")?this.table.removeHeader():this.table.addHeader()},refresh:function(e){var t=this.table.selectedTable();0<t.length&&(0===t.find("> thead").length?e.removeClass("fr-active").attr("aria-pressed",!1):e.addClass("fr-active").attr("aria-pressed",!0))}}),e.DefineIcon("tableFooter",{NAME:"table",FA5NAME:"table",SVG_KEY:"tableFooter"}),e.RegisterCommand("tableFooter",{title:"Table Footer",focus:!1,toggle:!0,callback:function(){this.popups.get("table.edit").find('.fr-command[data-cmd="tableFooter"]').hasClass("fr-active")?this.table.removeFooter():this.table.addFooter()},refresh:function(e){var t=this.table.selectedTable();0<t.length&&(0===t.find("tfoot").length?e.removeClass("fr-active").attr("aria-pressed",!1):e.addClass("fr-active").attr("aria-pressed",!0))}}),e.DefineIcon("tableRows",{NAME:"bars",SVG_KEY:"row"}),e.RegisterCommand("tableRows",{type:"dropdown",focus:!1,title:"Row",options:{above:"Insert row above",below:"Insert row below",delete:"Delete row"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',a=e.COMMANDS.tableRows.options;for(var l in a)a.hasOwnProperty(l)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableRows" data-param1="'+l+'" title="'+this.language.translate(a[l])+'">'+this.language.translate(a[l])+"</a></li>");return t+"</ul>"},callback:function(e,t){"above"==t||"below"==t?this.table.insertRow(t):this.table.deleteRow()}}),e.DefineIcon("tableColumns",{NAME:"bars fa-rotate-90",SVG_KEY:"columns"}),e.RegisterCommand("tableColumns",{type:"dropdown",focus:!1,title:"Column",options:{before:"Insert column before",after:"Insert column after",delete:"Delete column"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',a=e.COMMANDS.tableColumns.options;for(var l in a)a.hasOwnProperty(l)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableColumns" data-param1="'.concat(l,'" title="').concat(this.language.translate(a[l]),'">').concat(this.language.translate(a[l]),"</a></li>"));return t+"</ul>"},callback:function(e,t){"before"==t||"after"==t?this.table.insertColumn(t):this.table.deleteColumn()}}),e.DefineIcon("tableCells",{NAME:"square-o",FA5NAME:"square",SVG_KEY:"cellOptions"}),e.RegisterCommand("tableCells",{type:"dropdown",focus:!1,title:"Cell",options:{merge:"Merge cells","vertical-split":"Vertical split","horizontal-split":"Horizontal split"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',a=e.COMMANDS.tableCells.options;for(var l in a)a.hasOwnProperty(l)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCells" data-param1="'.concat(l,'" title="').concat(this.language.translate(a[l]),'">').concat(this.language.translate(a[l]),"</a></li>"));return t+"</ul>"},callback:function(e,t){"merge"==t?this.table.mergeCells():"vertical-split"==t?this.table.splitCellVertically():this.table.splitCellHorizontally()},refreshOnShow:function(e,t){1<this.$el.find(".fr-selected-cell").length?(t.find('a[data-param1="vertical-split"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="horizontal-split"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="merge"]').removeClass("fr-disabled").attr("aria-disabled",!1)):(t.find('a[data-param1="merge"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="vertical-split"]').removeClass("fr-disabled").attr("aria-disabled",!1),t.find('a[data-param1="horizontal-split"]').removeClass("fr-disabled").attr("aria-disabled",!1))}}),e.DefineIcon("tableRemove",{NAME:"trash",SVG_KEY:"removeTable"}),e.RegisterCommand("tableRemove",{title:"Remove Table",focus:!1,callback:function(){this.table.remove()}}),e.DefineIcon("tableStyle",{NAME:"paint-brush",SVG_KEY:"tableStyle"}),e.RegisterCommand("tableStyle",{title:"Table Style",type:"dropdown",focus:!1,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.tableStyles;for(var a in t)t.hasOwnProperty(a)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableStyle" data-param1="'.concat(a,'" title="').concat(this.language.translate(t[a]),'">').concat(this.language.translate(t[a]),"</a></li>"));return e+"</ul>"},callback:function(e,t){this.table.applyStyle(t,this.$el.find(".fr-selected-cell").closest("table"),this.opts.tableMultipleStyles,this.opts.tableStyles)},refreshOnShow:function(e,t){var a=this.$,l=this.$el.find(".fr-selected-cell").closest("table");l&&t.find(".fr-command").each(function(){var e=a(this).data("param1"),t=l.hasClass(e);a(this).toggleClass("fr-active",t).attr("aria-selected",t)})}}),e.DefineIcon("tableCellBackground",{NAME:"tint",SVG_KEY:"cellBackground"}),e.RegisterCommand("tableCellBackground",{title:"Cell Background",focus:!1,popup:!0,callback:function(){this.table.showColorsPopup()}}),e.RegisterCommand("tableCellBackgroundColor",{undo:!0,focus:!1,callback:function(e,t){this.table.setBackground(t)}}),e.DefineIcon("tableBack",{NAME:"arrow-left",SVG_KEY:"back"}),e.RegisterCommand("tableBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.table.back()},refresh:function(e){0!==this.table.selectedCells().length||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.DefineIcon("tableCellVerticalAlign",{NAME:"arrows-v",FA5NAME:"arrows-alt-v",SVG_KEY:"verticalAlignMiddle"}),e.RegisterCommand("tableCellVerticalAlign",{type:"dropdown",focus:!1,title:"Vertical Align",options:{Top:"Align Top",Middle:"Align Middle",Bottom:"Align Bottom"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',a=e.COMMANDS.tableCellVerticalAlign.options;for(var l in a)a.hasOwnProperty(l)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCellVerticalAlign" data-param1="'.concat(l.toLowerCase(),'" title="').concat(this.language.translate(a[l]),'">').concat(this.language.translate(l),"</a></li>"));return t+"</ul>"},callback:function(e,t){this.table.verticalAlign(t)},refreshOnShow:function(e,t){t.find('.fr-command[data-param1="'+this.$el.find(".fr-selected-cell").css("vertical-align")+'"]').addClass("fr-active").attr("aria-selected",!0)}}),e.DefineIcon("tableCellHorizontalAlign",{NAME:"align-left",SVG_KEY:"alignLeft"}),e.DefineIcon("align-left",{NAME:"align-left",SVG_KEY:"alignLeft"}),e.DefineIcon("align-right",{NAME:"align-right",SVG_KEY:"alignRight"}),e.DefineIcon("align-center",{NAME:"align-center",SVG_KEY:"alignCenter"}),e.DefineIcon("align-justify",{NAME:"align-justify",SVG_KEY:"alignJustify"}),e.RegisterCommand("tableCellHorizontalAlign",{type:"dropdown",focus:!1,title:"Horizontal Align",options:{left:"Align Left",center:"Align Center",right:"Align Right",justify:"Align Justify"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',a=e.COMMANDS.tableCellHorizontalAlign.options;for(var l in a)a.hasOwnProperty(l)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="tableCellHorizontalAlign" data-param1="'.concat(l,'" title="').concat(this.language.translate(a[l]),'">').concat(this.icon.create("align-".concat(l)),'<span class="fr-sr-only">').concat(this.language.translate(a[l]),"</span></a></li>"));return t+"</ul>"},callback:function(e,t){this.table.horizontalAlign(t)},refresh:function(e){var t=this.table.selectedCells(),a=this.$;t.length&&e.find("> *").first().replaceWith(this.icon.create("align-".concat(this.helpers.getAlignment(a(t[0])))))},refreshOnShow:function(e,t){t.find('.fr-command[data-param1="'+this.helpers.getAlignment(this.$el.find(".fr-selected-cell").first())+'"]').addClass("fr-active").attr("aria-selected",!0)}}),e.DefineIcon("tableCellStyle",{NAME:"magic",SVG_KEY:"cellStyle"}),e.RegisterCommand("tableCellStyle",{title:"Cell Style",type:"dropdown",focus:!1,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.tableCellStyles;for(var a in t)t.hasOwnProperty(a)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCellStyle" data-param1="'.concat(a,'" title="').concat(this.language.translate(t[a]),'">').concat(this.language.translate(t[a]),"</a></li>"));return e+"</ul>"},callback:function(e,t){this.table.applyStyle(t,this.$el.find(".fr-selected-cell"),this.opts.tableCellMultipleStyles,this.opts.tableCellStyles)},refreshOnShow:function(e,t){var a=this.$,l=this.$el.find(".fr-selected-cell").first();l&&t.find(".fr-command").each(function(){var e=a(this).data("param1"),t=l.hasClass(e);a(this).toggleClass("fr-active",t).attr("aria-selected",t)})}}),e.RegisterCommand("tableCellBackgroundCustomColor",{title:"OK",undo:!0,callback:function(){this.table.customColor()}}),e.DefineIcon("tableColorRemove",{NAME:"eraser",SVG_KEY:"remove"})})(a(48989))}};