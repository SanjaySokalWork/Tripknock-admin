(()=>{var e={};e.id=3648,e.ids=[3648],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},17885:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>m,tree:()=>d});var s=a(70260),r=a(28203),n=a(25155),i=a.n(n),l=a(67292),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let d=["",{children:["blog",{children:["categories",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,32143)),"E:\\Edverto Tech\\Main\\Tripknock\\admin-panel\\src\\app\\blog\\categories\\page.js"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,62804)),"E:\\Edverto Tech\\Main\\Tripknock\\admin-panel\\src\\app\\layout.js"],loading:[()=>Promise.resolve().then(a.bind(a,18988)),"E:\\Edverto Tech\\Main\\Tripknock\\admin-panel\\src\\app\\loading.js"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["E:\\Edverto Tech\\Main\\Tripknock\\admin-panel\\src\\app\\blog\\categories\\page.js"],p={require:a,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/blog/categories/page",pathname:"/blog/categories",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},68575:(e,t,a)=>{Promise.resolve().then(a.bind(a,32143))},28823:(e,t,a)=>{Promise.resolve().then(a.bind(a,95827))},29426:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(64445),r=a(45512);let n=(0,s.A)((0,r.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},23397:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(64445),r=a(45512);let n=(0,s.A)((0,r.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},81446:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(64445),r=a(45512);let n=(0,s.A)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},8469:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(64445),r=a(45512);let n=(0,s.A)((0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},99585:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(64445),r=a(45512);let n=(0,s.A)((0,r.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},95827:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var s=a(45512),r=a(58009),n=a(23397),i=a(29426),l=a(99585),o=a(8469),d=a(81446),c=a(79420),p=a(1991),m=a(25998);let h=({isOpen:e,onClose:t,category:a,onSave:i,title:l})=>{let[o,d]=(0,r.useState)({name:"",slug:""});(0,r.useEffect)(()=>{a?d({name:a.name||"",slug:a.slug||""}):d({name:"",slug:""})},[a,e]);let c=e=>{let{name:t,value:a}=e.target;if(d(e=>({...e,[t]:a})),"name"===t){let e=a.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-");d(t=>({...t,slug:e}))}};return e?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center border-b border-gray-200 px-6 py-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:l}),(0,s.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 transition-colors",children:(0,s.jsx)(n.A,{className:"w-5 h-5"})})]}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i(o)},className:"p-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:["Name ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",name:"name",className:"input-field w-full",value:o.name,onChange:c,required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:["URL Slug ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",name:"slug",className:"input-field w-full",value:o.slug,onChange:c,required:!0})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,s.jsx)("button",{type:"button",onClick:t,className:"btn-secondary",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"btn-primary",children:a?"Update Category":"Add Category"})]})]})]})}):null};function x(){let[e,t]=(0,r.useState)(!1),[a,n]=(0,r.useState)(""),[x,u]=(0,r.useState)(!1),[g,y]=(0,r.useState)(null),[f,b]=(0,r.useState)(null),[j,v]=(0,r.useState)([]),[w,N]=(0,r.useState)(null),k=async()=>{t(!0);try{let e=await fetch("https://data.tripknock.in/blog/categories/all");if(!e.ok)throw Error("Failed to fetch categories");let t=await e.json();v(t),N(null)}catch(e){console.log("Error fetching categories:",e),N("Failed to load categories. Please try again.")}t(!1)},C=async e=>{t(!0);try{let t=m.A.get("tk_auth_details");if(!t)throw Error("Authentication required. Please log in as an admin.");let a=JSON.parse(t).email,s=await fetch("https://data.tripknock.in/blog/categories/create",{method:"POST",headers:{"Content-Type":"application/json",admin:a},body:JSON.stringify(e)});if(!s.ok){let e=await s.json();throw Error(e.message||"Failed to add category")}u(!1),await k(),N(null)}catch(e){console.log("Error adding category:",e),N(e.message||"Failed to add category. Please try again.")}t(!1)},A=async e=>{if(g){t(!0);try{let t=m.A.get("tk_auth_details");if(!t)throw Error("Authentication required. Please log in as an admin.");let a=JSON.parse(t).email,s=await fetch(`https://data.tripknock.in/blog/categories/update/${g.id}`,{method:"PUT",headers:{"Content-Type":"application/json",admin:a},body:JSON.stringify(e)});if(!s.ok){let e=await s.json();throw Error(e.message||"Failed to update category")}y(null),await k(),N(null)}catch(e){console.log("Error updating category:",e),N(e.message||"Failed to update category. Please try again.")}t(!1)}},E=async()=>{if(f){t(!0);try{let e=m.A.get("tk_auth_details");if(!e)throw Error("Authentication required. Please log in as an admin.");let t=JSON.parse(e).email,a=await fetch(`https://data.tripknock.in/blog/categories/delete/${f.id}`,{method:"DELETE",headers:{admin:t}});if(!a.ok){let e=await a.json();throw Error(e.message||"Failed to delete category")}b(null),await k(),N(null)}catch(e){console.log("Error deleting category:",e),N(e.message||"Failed to delete category. Please try again.")}t(!1)}},P=j.filter(e=>e.name.toLowerCase().includes(a.toLowerCase())||e.slug.toLowerCase().includes(a.toLowerCase()));return(0,s.jsxs)(s.Fragment,{children:[e&&(0,s.jsx)(c.A,{}),f&&(0,s.jsx)(p.A,{open:!!f,title:"Delete Category",message:`Are you sure you want to delete the category "${f.name}"? This action cannot be undone.`,confirmLabel:"Delete",cancelLabel:"Cancel",onConfirm:E,onCancel:()=>b(null)}),(0,s.jsx)(h,{isOpen:x,onClose:()=>u(!1),category:null,onSave:C,title:"Add New Category"}),(0,s.jsx)(h,{isOpen:!!g,onClose:()=>y(null),category:g,onSave:A,title:"Edit Category"}),(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-secondary-900",children:"Categories"}),(0,s.jsx)("p",{className:"text-secondary-600",children:"Manage blog categories"})]}),(0,s.jsxs)("button",{onClick:()=>u(!0),className:"btn-primary flex items-center gap-2",children:[(0,s.jsx)(i.A,{className:"w-5 h-5"}),"Add Category"]})]}),w&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:w}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-secondary-200 p-4 mb-6",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(l.A,{className:"h-5 w-5 text-secondary-400"})}),(0,s.jsx)("input",{type:"text",className:"input-field pl-10 w-full",placeholder:"Search categories...",value:a,onChange:e=>n(e.target.value)})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-secondary-200 overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-secondary-200",children:[(0,s.jsx)("thead",{className:"bg-secondary-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Name"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"URL Slug"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Blogs"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-secondary-200",children:0===P.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:"4",className:"px-6 py-4 text-center text-secondary-500",children:a?"No categories found matching your search.":"No categories found. Add your first category!"})}):P.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm font-medium text-secondary-900",children:e.name})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-secondary-500",children:e.slug})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-secondary-500",children:e.blogCount})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,s.jsx)("button",{onClick:()=>y(e),className:"text-primary-600 hover:text-primary-900 mr-4",children:(0,s.jsx)(o.A,{className:"w-5 h-5"})}),(0,s.jsx)("button",{onClick:()=>b(e),className:"text-red-600 hover:text-red-900",children:(0,s.jsx)(d.A,{className:"w-5 h-5"})})]})]},e.id))})]})})})]})]})}},1991:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(45512);let r=(0,a(64445).A)((0,s.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning");function n({open:e,onConfirm:t,onCancel:a,title:n,message:i,confirmLabel:l="Confirm",confirmVariant:o="primary",disabled:d=!1}){return e?(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6 m-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 text-red-600 mb-4",children:[(0,s.jsx)(r,{className:"w-6 h-6"}),(0,s.jsx)("h2",{className:"text-lg font-semibold",children:n})]}),(0,s.jsx)("p",{className:"text-secondary-600 mb-6",children:i}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:a,className:"px-4 py-2 text-secondary-700 hover:bg-secondary-50 rounded-lg transition-colors",disabled:d,children:"Cancel"}),(0,s.jsx)("button",{onClick:t,className:`px-4 py-2 rounded-lg transition-colors ${(()=>{switch(o){case"error":return"bg-red-600 text-white hover:bg-red-700";case"warning":return"bg-yellow-600 text-white hover:bg-yellow-700";default:return"bg-primary-600 text-white hover:bg-primary-700"}})()} ${d?"opacity-50 cursor-not-allowed":""}`,disabled:d,children:l})]})]})}):null}},32143:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"E:\\\\Edverto Tech\\\\Main\\\\Tripknock\\\\admin-panel\\\\src\\\\app\\\\blog\\\\categories\\\\page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"E:\\Edverto Tech\\Main\\Tripknock\\admin-panel\\src\\app\\blog\\categories\\page.js","default")},70440:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var s=a(88077);let r=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[638,8305,8077,7348],()=>a(17885));module.exports=s})();