(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2564],{87104:(e,t,a)=>{Promise.resolve().then(a.bind(a,90428))},78069:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(12983),r=a(95155);let n=(0,s.A)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},79545:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(12983),r=a(95155);let n=(0,s.A)((0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},78205:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(12983),r=a(95155);let n=(0,s.A)((0,r.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},77097:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(12983),r=a(95155);let n=(0,s.A)((0,r.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star")},9313:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(12983),r=a(95155);let n=(0,s.A)((0,r.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},55088:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(12983),r=a(95155);let n=(0,s.A)((0,r.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning")},76046:(e,t,a)=>{"use strict";var s=a(66658);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},90428:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var s=a(95155),r=a(12115),n=a(77097);let i=(0,a(12983).A)((0,s.jsx)("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28z"}),"StarOutline");var l=a(78205),o=a(9313),d=a(79545),c=a(78069),m=a(97908),u=a(78477),x=a(34854),h=a(89208),p=a(8077),g=a(38258);function v(){let{showSuccess:e,showError:t,showInfo:a}=(0,p.h)(),{setLoading:v,isLoading:f}=(0,g.M)(),[b,y]=(0,r.useState)(""),[j,w]=(0,r.useState)("text"),[N,k]=(0,r.useState)("all"),[C,S]=(0,r.useState)(null),[R,_]=(0,r.useState)({name:"",rating:5,comment:"",review_type:"text",destination:""}),[A,E]=(0,r.useState)(null),[L,D]=(0,r.useState)(null),[z,T]=(0,r.useState)(null),[I,M]=(0,r.useState)([]),[O,P]=(0,r.useState)([]),[V,F]=(0,r.useState)(null),[B,U]=(0,r.useState)(!1),[q,J]=(0,r.useState)({name:"",rating:5,comment:"",destination:""}),[H,G]=(0,r.useState)("none"),[W,Y]=(0,r.useState)(null),[K,Q]=(0,r.useState)(null),[X,Z]=(0,r.useState)(!1),[$,ee]=(0,r.useState)(""),[et,ea]=(0,r.useState)(!1),{user:es}=(0,x.U)();(0,r.useEffect)(()=>{document.title="Reviews Management - Tripknock",er(),en()},[]);let er=async()=>{v("fetchReviews",!0,"Loading reviews...");try{let e=h.A.get("tk_auth_details");if(!e){t("Admin authentication not found");return}let a=JSON.parse(e),s=await fetch("https://data.tripknock.in/reviews/all",{headers:{admin:a.email}});if(s.ok){let e=await s.json();M(e)}else t("Failed to fetch reviews")}catch(e){console.log("Error fetching reviews:",e),t("An error occurred while fetching reviews")}finally{v("fetchReviews",!1)}},en=async()=>{try{let e=await fetch("https://data.tripknock.in/package/load"),t=await e.json();if(t.destination){let e=new Set(t.destination.map(e=>e.name));P(Array.from(e))}}catch(e){console.log("Error fetching destinations:",e),t("Failed to load destinations")}},ei=e=>{S(e),_({name:e.name,rating:e.rating,comment:e.comment||"",review_type:e.review_type||"text",destination:e.destination||""})},el=e=>{let{name:t,value:a}=e.target;_(e=>({...e,[t]:a}))},eo=e=>{let t=Array.from(e.target.files);0!==t.length&&E(t)},ed=async a=>{a.preventDefault(),v("editReview",!0,"Updating review...");try{let a;let s=h.A.get("tk_auth_details");if(!s){t("Admin authentication not found"),v("editReview",!1);return}let r=JSON.parse(s);if(null!==A&&A.length>0||null!==L){let e=new FormData;e.append("id",C.id),e.append("name",R.name),e.append("rating",R.rating),e.append("comment",R.comment),e.append("review_type",R.review_type),e.append("destination",R.destination),L&&e.append("thumbnail",L),A&&A.length>0&&("text"===R.review_type?A.forEach(t=>{e.append("image",t)}):e.append("video",A[0])),a=await fetch("https://data.tripknock.in/reviews/edit-with-media",{method:"POST",headers:{admin:r.email},body:e})}else a=await fetch("https://data.tripknock.in/reviews/edit",{method:"POST",headers:{"Content-Type":"application/json",admin:r.email},body:JSON.stringify({id:C.id,name:R.name,rating:R.rating,comment:R.comment,review_type:R.review_type,destination:R.destination})});if(a.ok)await a.json(),e("Review updated successfully"),S(null),E(null),D(null),er();else{let e=await a.json();t(e.message||"Failed to update review")}}catch(e){console.log("Error updating review:",e),t("An error occurred while updating the review")}finally{v("editReview",!1)}},ec=e=>{F(e)},em=e=>{T(e)},eu=async()=>{v("deleteReview",!0,"Deleting review...");try{let a=h.A.get("tk_auth_details");if(!a){t("Admin authentication not found"),v("deleteReview",!1);return}let s=JSON.parse(a);(await fetch("https://data.tripknock.in/reviews/delete/".concat(z.id),{method:"DELETE",headers:{admin:s.email}})).ok?(M(e=>e.filter(e=>e.id!==z.id)),e("Review deleted successfully"),T(null)):t("Failed to delete review")}catch(e){console.log("Error deleting review:",e),t("An error occurred while deleting review")}finally{v("deleteReview",!1)}},ex=()=>{console.log("Opening submit form"),U(!0),J({name:"",rating:5,comment:"",destination:""}),G("none"),Y(null),Q(null),ee(""),ea(!1),Z(!1)},eh=e=>{let{name:t,value:a}=e.target;J(e=>({...e,[t]:a}))},ep=e=>{let t=Array.from(e.target.files);0!==t.length&&Y(t)},eg=async e=>{e.preventDefault(),Z(!0),ee(""),ea(!1);try{if(!H||"none"===H){ee("Please select a review type"),Z(!1);return}let e=h.A.get("tk_auth_details");if(!e){ee("Admin authentication not found"),Z(!1);return}let t=JSON.parse(e),a=new FormData;a.append("name",q.name),a.append("rating",q.rating),a.append("comment",q.comment),a.append("review_type",H),a.append("destination",q.destination),"video"===H&&K&&a.append("thumbnail",K),W&&W.length>0&&("text"===H?W.forEach(e=>{a.append("image",e)}):a.append("video",W[0]));let s=await fetch("https://data.tripknock.in/reviews/submit",{method:"POST",headers:{admin:t.email},body:a});if(s.ok)await s.json(),ea(!0),ee(""),J({name:"",rating:5,comment:"",destination:""}),Y(null),Q(null),setTimeout(()=>{U(!1),ea(!1),er()},1500);else{let e=await s.json();ee(e.message||"Failed to submit review")}}catch(e){console.log("Error submitting review:",e),ee("An error occurred while submitting the review")}finally{Z(!1)}},ev=I.filter(e=>{let t=e.name.toLowerCase().includes(b.toLowerCase())||e.designation&&e.designation.toLowerCase().includes(b.toLowerCase())||e.comment&&e.comment.toLowerCase().includes(b.toLowerCase()),a="all"===j||e.review_type===j,s="all"===N||e.destination==N||e.destination===N||String(e.destination)===String(N);return t&&a&&s}),ef=e=>{if(!e||!O.length)return"-";let t=O.find(t=>t.id==e||t.id===e||String(t.id)===String(e));return(null==t?void 0:t.title)||e||"-"};return(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Customer Reviews Management"})}),(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,s.jsx)("div",{className:"px-6 py-4 flex justify-between items-center",children:(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"All Reviews"})}),(0,s.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex space-x-4 items-center",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",placeholder:"Search reviews...",value:b,onChange:e=>{y(e.target.value)},className:"border rounded-lg px-4 py-2 pl-10 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),(0,s.jsx)("div",{className:"absolute left-3 top-2.5",children:(0,s.jsx)(l.A,{className:"h-5 w-5 text-gray-400"})})]}),(0,s.jsxs)("select",{className:"border rounded-lg px-4 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:j,onChange:e=>{w(e.target.value)},children:[(0,s.jsx)("option",{value:"all",children:"All Types"}),(0,s.jsx)("option",{value:"text",children:"Text Reviews"}),(0,s.jsx)("option",{value:"video",children:"Video Reviews"})]}),(0,s.jsxs)("select",{className:"border rounded-lg px-4 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",value:N,onChange:e=>{k(e.target.value)},children:[(0,s.jsx)("option",{value:"all",children:"All Destinations"}),O.map((e,t)=>(0,s.jsx)("option",{value:e,children:e},t))]})]}),(0,s.jsxs)("button",{onClick:()=>ex(),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors flex items-center gap-2",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"Add Review"]})]}),f("fetchReviews")?(0,s.jsx)("div",{className:"flex justify-center py-10",children:(0,s.jsx)(m.A,{})}):0===ev.length?(0,s.jsxs)("div",{className:"p-10 text-center text-gray-500",children:[(0,s.jsx)("p",{className:"mb-4",children:"No reviews found matching your criteria."}),(0,s.jsx)("button",{onClick:()=>ex(),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Add Your First Review"})]}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Destination"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:ev.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})})})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.review_type})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-500",children:ef(e.destination)})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.date}),(0,s.jsx)("td",{className:"px-6 py-4 text-right text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,s.jsx)("button",{onClick:()=>ec(e),className:"text-blue-600 hover:text-blue-900",title:"View",children:(0,s.jsx)(o.A,{})}),(0,s.jsx)("button",{onClick:()=>ei(e),className:"text-indigo-600 hover:text-indigo-900",title:"Edit",children:(0,s.jsx)(d.A,{})}),(0,s.jsx)("button",{onClick:()=>em(e),className:"text-red-600 hover:text-red-900",title:"Delete",children:(0,s.jsx)(c.A,{})})]})})]},e.id))})]})})]}),V&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Review Details"}),(0,s.jsx)("button",{onClick:()=>F(null),className:"text-gray-500 hover:text-gray-700",children:"\xd7"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Customer Information"}),(0,s.jsxs)("div",{className:"mt-2 grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Name"}),(0,s.jsx)("p",{className:"text-base text-gray-900",children:V.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Review Type"}),(0,s.jsx)("p",{className:"text-base text-gray-900 capitalize",children:V.review_type||"text"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Date"}),(0,s.jsx)("p",{className:"text-base text-gray-900",children:new Date(V.date).toLocaleDateString()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Destination"}),(0,s.jsx)("p",{className:"text-base text-gray-900",children:ef(V.destination)})]})]})]}),V.profile_image_url&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Profile Image"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("img",{src:"https://data.tripknock.in".concat(V.profile_image_url),alt:"Profile",className:"w-20 h-20 rounded-full object-cover border border-gray-200",onError:e=>{e.target.onerror=null,e.target.src="/placeholder-image.png"}})})]}),(!V.review_type||"text"===V.review_type)&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Rating"}),(0,s.jsx)("div",{className:"mt-2",children:(e=>{let t=[];for(let a=1;a<=5;a++)a<=e?t.push((0,s.jsx)(n.A,{className:"text-yellow-500"},a)):t.push((0,s.jsx)(i,{className:"text-gray-400"},a));return(0,s.jsx)("div",{className:"flex",children:t})})(V.rating)})]}),(!V.review_type||"text"===V.review_type)&&V.comment&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Comment"}),(0,s.jsx)("div",{className:"mt-2 p-4 bg-gray-50 rounded-lg",children:(0,s.jsx)("p",{className:"text-gray-700",children:V.comment})})]}),V.review_images&&V.review_images.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Review Images"}),(0,s.jsx)("div",{className:"mt-2 grid grid-cols-2 sm:grid-cols-3 gap-4",children:V.review_images.map((e,t)=>(0,s.jsx)("img",{src:"https://data.tripknock.in".concat(e.url||e),alt:"Review image ".concat(t+1),className:"w-full h-24 object-cover rounded-lg border border-gray-200",onError:e=>{e.target.onerror=null,e.target.src="/placeholder-image.png"}},t))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Media"}),(0,s.jsx)("div",{className:"mt-2",children:V.image_url?(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("img",{src:"https://data.tripknock.in".concat(V.image_url),alt:"Review",className:"max-w-full h-auto rounded-lg border border-gray-200",onError:e=>{e.target.onerror=null,e.target.src="/placeholder-image.png"}})}):V.video_url?(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("video",{src:"https://data.tripknock.in".concat(V.video_url),className:"max-w-full h-auto rounded-lg border border-gray-200",controls:!0,onError:e=>{e.target.onerror=null,e.target.style.display="none";let t=document.createElement("p");t.textContent="Video could not be loaded",t.className="text-red-500 text-sm",e.target.parentNode.appendChild(t)}})}):(0,s.jsx)("p",{className:"text-gray-500",children:"No media attached"})})]})]}),(0,s.jsx)("div",{className:"mt-6 flex justify-end",children:(0,s.jsx)("button",{onClick:()=>F(null),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"Close"})})]})})}),C&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Edit Review"}),(0,s.jsxs)("form",{onSubmit:ed,children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Name"}),(0,s.jsx)("input",{type:"text",name:"name",value:R.name,onChange:el,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Rating"}),(0,s.jsxs)("select",{name:"rating",value:R.rating,onChange:el,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0,children:[(0,s.jsx)("option",{value:"1",children:"1 Star"}),(0,s.jsx)("option",{value:"2",children:"2 Stars"}),(0,s.jsx)("option",{value:"3",children:"3 Stars"}),(0,s.jsx)("option",{value:"4",children:"4 Stars"}),(0,s.jsx)("option",{value:"5",children:"5 Stars"})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Review Type"}),(0,s.jsxs)("select",{name:"review_type",value:R.review_type,onChange:el,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,s.jsx)("option",{value:"text",children:"Text Review"}),(0,s.jsx)("option",{value:"video",children:"Video Review"})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Destination"}),(0,s.jsxs)("select",{name:"destination",value:R.destination,onChange:el,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select Destination"}),O.map((e,t)=>(0,s.jsx)("option",{value:e,children:e},t))]})]}),"text"===R.review_type&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Comment"}),(0,s.jsx)("textarea",{name:"comment",value:R.comment,onChange:el,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"4",required:"text"===R.review_type})]}),C&&"video"===C.review_type&&C.thumbnail_url&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Current Video Thumbnail"}),(0,s.jsx)("div",{className:"border rounded-lg p-2 bg-gray-50",children:(0,s.jsx)("img",{src:"https://data.tripknock.in".concat(C.thumbnail_url),alt:"Video Thumbnail",className:"w-32 h-20 object-cover rounded",onError:e=>{e.target.onerror=null,e.target.src="/placeholder-image.png"}})})]}),C&&C.review_images&&C.review_images.length>0&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Current Review Images"}),(0,s.jsx)("div",{className:"border rounded-lg p-2 bg-gray-50 grid grid-cols-3 gap-2",children:C.review_images.map((e,t)=>(0,s.jsx)("img",{src:"https://data.tripknock.in".concat(e.url||e),alt:"Review image ".concat(t+1),className:"w-full h-20 object-cover rounded",onError:e=>{e.target.onerror=null,e.target.src="/placeholder-image.png"}},t))})]}),C&&C.video_url&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Video Preview"}),(0,s.jsx)("div",{className:"border rounded-lg p-2 bg-gray-50",children:(0,s.jsx)("video",{src:"https://data.tripknock.in".concat(C.video_url),className:"max-w-xs max-h-40",controls:!0,onError:e=>{e.target.onerror=null,e.target.style.display="none";let t=document.createElement("p");t.textContent="Video could not be loaded",t.className="text-red-500 text-sm",e.target.parentNode.appendChild(t)}})})]}),"video"===R.review_type&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Video Thumbnail"}),(0,s.jsx)("input",{type:"file",name:"thumbnail",accept:"image/*",onChange:e=>{let t=e.target.files[0];t&&D(t)},className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Upload a thumbnail image for the video review."})]}),"text"===R.review_type&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Review Images (Multiple)"}),(0,s.jsx)("input",{type:"file",name:"image",accept:"image/*",multiple:!0,onChange:eo,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to keep the current images, or select new ones to replace them."})]}),"video"===R.review_type&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Video (Optional)"}),(0,s.jsx)("input",{type:"file",name:"video",accept:"video/*",onChange:eo,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to keep the current video, or select a new one to replace it."})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{S(null),E(null),D(null)},className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Save Changes"})]})]})]})})}),B&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",style:{zIndex:1e3},children:(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Submit Review"}),(0,s.jsxs)("form",{onSubmit:eg,children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Name"}),(0,s.jsx)("input",{type:"text",name:"name",value:q.name,onChange:eh,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Destination"}),(0,s.jsxs)("select",{name:"destination",value:q.destination,onChange:eh,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select Destination"}),O.map((e,t)=>(0,s.jsx)("option",{value:e,children:e},t))]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Rating"}),(0,s.jsxs)("select",{name:"rating",value:q.rating,onChange:e=>{J(t=>({...t,rating:e.target.value}))},className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0,children:[(0,s.jsx)("option",{value:"1",children:"1 Star"}),(0,s.jsx)("option",{value:"2",children:"2 Stars"}),(0,s.jsx)("option",{value:"3",children:"3 Stars"}),(0,s.jsx)("option",{value:"4",children:"4 Stars"}),(0,s.jsx)("option",{value:"5",children:"5 Stars"})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Review Type"}),(0,s.jsxs)("select",{name:"review_type",value:H,onChange:e=>{G(e.target.value),Y(null),Q(null),$&&$.includes("review type")&&ee("")},className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0,children:[(0,s.jsx)("option",{value:"none",children:"Select Review Type"}),(0,s.jsx)("option",{value:"text",children:"Text Review"}),(0,s.jsx)("option",{value:"video",children:"Video Review"})]}),"none"===H&&(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Please select a review type to see additional fields"})]}),"video"===H&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Video Thumbnail"}),(0,s.jsx)("input",{type:"file",name:"thumbnail",accept:"image/*",onChange:e=>{let t=e.target.files[0];t&&Q(t)},className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Upload a thumbnail image for the video review."})]}),"text"===H&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Comment"}),(0,s.jsx)("textarea",{name:"comment",value:q.comment,onChange:eh,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"4",required:"text"===H})]}),"text"===H&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Review Images (Multiple)"}),(0,s.jsx)("input",{type:"file",name:"image",accept:"image/*",multiple:!0,onChange:ep,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),"video"===H&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Video"}),(0,s.jsx)("input",{type:"file",name:"video",accept:"video/*",onChange:ep,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),$&&(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)("p",{className:"text-red-500 text-sm",children:$})}),et&&(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)("p",{className:"text-green-500 text-sm",children:"Review submitted successfully!"})}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{U(!1),ee(""),ea(!1),Z(!1)},className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:X||"none"===H,children:X?"Submitting...":"Submit Review"})]})]})]})})}),(0,s.jsx)(u.A,{open:!!z,title:"Delete Review",message:"Are you sure you want to delete this review? This action cannot be undone.",confirmLabel:f("deleteReview")?"Deleting...":"Delete",confirmVariant:"error",onConfirm:eu,onCancel:()=>T(null),disabled:f("deleteReview")}),(0,s.jsx)("div",{className:"fixed bottom-8 right-8",children:(0,s.jsx)("button",{onClick:()=>ex(),className:"w-14 h-14 rounded-full bg-primary-600 text-white shadow-lg hover:bg-primary-700 transition-colors flex items-center justify-center",title:"Add New Review",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})})})})]})}},78477:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(95155),r=a(55088);function n(e){let{open:t,onConfirm:a,onCancel:n,title:i,message:l,confirmLabel:o="Confirm",confirmVariant:d="primary",disabled:c=!1}=e;return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6 m-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 text-red-600 mb-4",children:[(0,s.jsx)(r.A,{className:"w-6 h-6"}),(0,s.jsx)("h2",{className:"text-lg font-semibold",children:i})]}),(0,s.jsx)("p",{className:"text-secondary-600 mb-6",children:l}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:n,className:"px-4 py-2 text-secondary-700 hover:bg-secondary-50 rounded-lg transition-colors",disabled:c,children:"Cancel"}),(0,s.jsx)("button",{onClick:a,className:"px-4 py-2 rounded-lg transition-colors ".concat((()=>{switch(d){case"error":return"bg-red-600 text-white hover:bg-red-700";case"warning":return"bg-yellow-600 text-white hover:bg-yellow-700";default:return"bg-primary-600 text-white hover:bg-primary-700"}})()," ").concat(c?"opacity-50 cursor-not-allowed":""),disabled:c,children:o})]})]})}):null}},97908:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(95155);function r(){return(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[200px]",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})})}},34854:(e,t,a)=>{"use strict";a.d(t,{D:()=>o,U:()=>d});var s=a(95155),r=a(12115),n=a(89208),i=a(76046);let l=(0,r.createContext)(),o=e=>{let{children:t}=e,a=(0,i.useRouter)(),o=(0,i.usePathname)(),[d,c]=(0,r.useState)(!1),[m,u]=(0,r.useState)({id:"",email:"",name:"",role:"",phone:""});return(0,r.useEffect)(()=>{let e=n.A.get("tk_auth_details");if(null!=e){let t=JSON.parse(e);(async()=>{let e=await fetch("https://data.tripknock.in/user/verify",{method:"POST",headers:{"Content-Type":"application/json",admin:t.email},body:JSON.stringify({id:t.id,email:t.email})}),s=await e.json();!1===s.status?(c(!1),a.push("/login"),u({})):(u(s),c(!0))})()}else u({}),c(!1),a.push("/login")},[o]),(0,s.jsx)(l.Provider,{value:{user:m,isLoggedIn:d,login:e=>{u(e),c(!0)},logout:()=>{u(null),c(!1)}},children:t})},d=()=>(0,r.useContext)(l)},38258:(e,t,a)=>{"use strict";a.d(t,{M:()=>d,o:()=>c});var s=a(95155),r=a(12115),n=a(44522),i=a(7743),l=a(10810);let o=(0,r.createContext)(),d=()=>{let e=(0,r.useContext)(o);if(!e)throw Error("useLoading must be used within a LoadingProvider");return e},c=e=>{let{children:t}=e,[a,d]=(0,r.useState)({}),[c,m]=(0,r.useState)(!1),[u,x]=(0,r.useState)("");return(0,s.jsxs)(o.Provider,{value:{setLoading:function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";d(a=>({...a,[e]:t})),t&&a&&x(a)},isLoading:e=>a[e]||!1,showGlobalLoading:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Loading...";x(e),m(!0)},hideGlobalLoading:()=>{m(!1),x("")},hasAnyLoading:()=>c||Object.values(a).some(e=>e),globalLoading:c},children:[t,(0,s.jsxs)(n.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1,backgroundColor:"rgba(0, 0, 0, 0.7)",flexDirection:"column",gap:2},open:c,children:[(0,s.jsx)(i.A,{color:"inherit",size:60}),u&&(0,s.jsx)(l.A,{variant:"h6",component:"div",children:u})]})]})}},8077:(e,t,a)=>{"use strict";a.d(t,{h:()=>o,p:()=>c});var s=a(95155),r=a(58803),n=a.n(r),i=a(12115);let l=(0,i.createContext)(),o=()=>{let e=(0,i.useContext)(l);if(!e)throw Error("useNotification must be used within a NotificationProvider");return e},d=e=>{let{notification:t,onRemove:a}=e;return(0,i.useEffect)(()=>{if(t.autoHide){let e=setTimeout(()=>{a(t.id)},t.duration);return()=>clearTimeout(e)}},[t,a]),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 mb-3 rounded-lg shadow-lg min-w-[300px] max-w-[400px] border-l-4 transform transition-all duration-300",style:{animation:"slideIn 0.3s ease-out",...(e=>{switch(e){case"success":return{backgroundColor:"#10B981",color:"white",borderLeftColor:"#059669"};case"error":return{backgroundColor:"#EF4444",color:"white",borderLeftColor:"#DC2626"};case"warning":return{backgroundColor:"#F59E0B",color:"white",borderLeftColor:"#D97706"};case"info":return{backgroundColor:"#3B82F6",color:"white",borderLeftColor:"#2563EB"};default:return{backgroundColor:"#6B7280",color:"white",borderLeftColor:"#4B5563"}}})(t.type)},children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"text-xl mr-3 font-bold",children:(e=>{switch(e){case"success":return"✓";case"error":return"✕";case"warning":return"⚠";case"info":return"ℹ";default:return"•"}})(t.type)}),(0,s.jsx)("span",{className:"text-sm font-medium",children:t.message})]}),(0,s.jsx)("button",{onClick:()=>a(t.id),className:"ml-4 text-white hover:text-gray-200 font-bold text-lg",children:"\xd7"})]})},c=e=>{let{children:t}=e,[a,r]=(0,i.useState)([]),o=(0,i.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",a=!(arguments.length>2)||void 0===arguments[2]||arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3,n=Date.now()+Math.random(),i={id:n,message:e,type:t,autoHide:a,duration:s};return r(e=>[...e,i]),n},[]),c=(0,i.useCallback)(e=>{r(t=>t.filter(t=>t.id!==e))},[]),m=(0,i.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o(e,"success",t,5e3)},[o]),u=(0,i.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o(e,"error",t,7e3)},[o]),x=(0,i.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o(e,"warning",t,6e3)},[o]),h=(0,i.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o(e,"info",t,4e3)},[o]),p=(0,i.useCallback)(()=>{m("Test notification is working!")},[m]),g=(0,i.useCallback)(()=>({addNotification:o,removeNotification:c,showSuccess:m,showError:u,showWarning:x,showInfo:h,testNotification:p}),[o,c,m,u,x,h,p]);return(0,s.jsxs)(l.Provider,{value:g(),children:[t,(0,s.jsx)("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:999999,pointerEvents:"none"},className:"jsx-5de7ed1ad044b70b",children:(0,s.jsx)("div",{style:{pointerEvents:"auto"},className:"jsx-5de7ed1ad044b70b",children:a.map(e=>(0,s.jsx)(d,{notification:e,onRemove:c},e.id))})}),(0,s.jsx)(n(),{id:"5de7ed1ad044b70b",children:"@-webkit-keyframes slideIn{from{-webkit-transform:translatex(100%);transform:translatex(100%);opacity:0}to{-webkit-transform:translatex(0);transform:translatex(0);opacity:1}}@-moz-keyframes slideIn{from{-moz-transform:translatex(100%);transform:translatex(100%);opacity:0}to{-moz-transform:translatex(0);transform:translatex(0);opacity:1}}@-o-keyframes slideIn{from{-o-transform:translatex(100%);transform:translatex(100%);opacity:0}to{-o-transform:translatex(0);transform:translatex(0);opacity:1}}@keyframes slideIn{from{-webkit-transform:translatex(100%);-moz-transform:translatex(100%);-o-transform:translatex(100%);transform:translatex(100%);opacity:0}to{-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0);opacity:1}}"})]})}},89208:(e,t,a)=>{"use strict";function s(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)e[s]=a[s]}return e}a.d(t,{A:()=>r});var r=function e(t,a){function r(e,r,n){if("undefined"!=typeof document){"number"==typeof(n=s({},a,n)).expires&&(n.expires=new Date(Date.now()+864e5*n.expires)),n.expires&&(n.expires=n.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var l in n)n[l]&&(i+="; "+l,!0!==n[l]&&(i+="="+n[l].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+i}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var a=document.cookie?document.cookie.split("; "):[],s={},r=0;r<a.length;r++){var n=a[r].split("="),i=n.slice(1).join("=");try{var l=decodeURIComponent(n[0]);if(s[l]=t.read(i,l),e===l)break}catch(e){}}return e?s[e]:s}},remove:function(e,t){r(e,"",s({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,s({},this.attributes,t))},withConverter:function(t){return e(s({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(a)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},e=>{var t=t=>e(e.s=t);e.O(0,[2983,401,8441,1517,7358],()=>t(87104)),_N_E=e.O()}]);