(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{17041:(e,t,s)=>{Promise.resolve().then(s.bind(s,39852))},52701:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(12983),r=s(95155);let n=(0,a.A)((0,r.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Article")},32651:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(12983),r=s(95155);let n=(0,a.A)((0,r.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"LocationOn")},64954:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(12983),r=s(95155);let n=(0,a.A)((0,r.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"People")},76046:(e,t,s)=>{"use strict";var a=s(66658);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},39852:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var a=s(95155),r=s(12115),n=s(48173),o=s.n(n),i=s(34854),l=s(32651),c=s(12983);let d=(0,c.A)((0,a.jsx)("path",{d:"M17 6h-2V3c0-.55-.45-1-1-1h-4c-.55 0-1 .45-1 1v3H7c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2 0 .55.45 1 1 1s1-.45 1-1h6c0 .55.45 1 1 1s1-.45 1-1c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2M9.5 18H8V9h1.5zm3.25 0h-1.5V9h1.5zm.75-12h-3V3.5h3zM16 18h-1.5V9H16z"}),"Luggage");var u=s(52701),m=s(64954);let h=(0,c.A)((0,a.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-6.43 9.57L12 15l-1.57-3.43L7 10l3.43-1.57L12 5l1.57 3.43L17 10z"}),"Reviews");var x=s(97908),f=s(8077),p=s(38258);function b(){let{user:e}=(0,i.U)(),{showError:t,showInfo:s}=(0,f.h)(),{setLoading:n,isLoading:c}=(0,p.M)(),[b,g]=(0,r.useState)({destinations:{total:0,published:0,draft:0},tours:{total:0,published:0,draft:0},blogs:{total:0,published:0,draft:0},users:{total:0},reviews:{total:0}});(0,r.useEffect)(()=>{document.title="Dashboard | Tripknock",v()},[]);let v=async()=>{try{n("fetchStats",!0,"Loading dashboard stats...");let e=await fetch("https://data.tripknock.in/stats/dashboard");if(!e.ok)throw Error("Failed to fetch stats");let t=await e.json();g(t)}catch(e){console.error("Error fetching stats:",e),t("Failed to load stats, showing placeholder data"),g({destinations:{total:24,published:18,draft:6},tours:{total:45,published:32,draft:13},blogs:{total:18,published:15,draft:3},users:{total:1205},reviews:{total:342}})}finally{n("fetchStats",!1)}},j=[{title:"Destinations",description:"Manage travel destinations",icon:(0,a.jsx)(l.A,{className:"h-6 w-6 text-blue-500"}),link:"/destinations",stats:b.destinations},{title:"Tours",description:"Manage tour packages",icon:(0,a.jsx)(d,{className:"h-6 w-6 text-purple-500"}),link:"/tours",stats:b.tours},{title:"Blogs",description:"Manage blog articles",icon:(0,a.jsx)(u.A,{className:"h-6 w-6 text-green-500"}),link:"/blogs",stats:b.blogs},{title:"Users",description:"Manage user accounts",icon:(0,a.jsx)(m.A,{className:"h-6 w-6 text-orange-500"}),link:"/users",stats:b.users},{title:"Reviews",description:"View customer reviews",icon:(0,a.jsx)(h,{className:"h-6 w-6 text-yellow-500"}),link:"/reviews",stats:b.reviews}];return c("fetchStats")?(0,a.jsx)(x.A,{}):(0,a.jsxs)("div",{className:"p-6 space-y-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-secondary-900",children:"Dashboard"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Welcome back, ",null==e?void 0:e.name]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-secondary-800 mb-4",children:"Quick Access"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:j.map((e,t)=>(0,a.jsx)(o(),{href:e.link,className:"card p-4 hover:shadow-md transition-shadow duration-200 hover:border-primary-300",children:(0,a.jsxs)("div",{className:"flex items-start w-full",children:[(0,a.jsx)("div",{className:"p-2 bg-gray-50 rounded-lg mr-3",children:e.icon}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("h3",{className:"font-medium text-secondary-900",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-secondary-600 mt-1",children:e.description}),e.stats&&(0,a.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs text-secondary-500",children:"Total:"}),(0,a.jsx)("span",{className:"text-xs font-medium bg-gray-100 px-2 py-0.5 rounded-full",children:e.stats.total})]}),void 0!==e.stats.published&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs text-secondary-500",children:"Published:"}),(0,a.jsx)("span",{className:"text-xs font-medium bg-green-100 text-green-800 px-2 py-0.5 rounded-full",children:e.stats.published})]}),void 0!==e.stats.draft&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs text-secondary-500",children:"Draft:"}),(0,a.jsx)("span",{className:"text-xs font-medium bg-red-100 text-red-800 px-2 py-0.5 rounded-full",children:e.stats.draft})]})]})]})]})},t))})]})]})}},97908:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(95155);function r(){return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[200px]",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})})}},34854:(e,t,s)=>{"use strict";s.d(t,{D:()=>l,U:()=>c});var a=s(95155),r=s(12115),n=s(89208),o=s(76046);let i=(0,r.createContext)(),l=e=>{let{children:t}=e,s=(0,o.useRouter)(),l=(0,o.usePathname)(),[c,d]=(0,r.useState)(!1),[u,m]=(0,r.useState)({id:"",email:"",name:"",role:"",phone:""});return(0,r.useEffect)(()=>{let e=n.A.get("tk_auth_details");if(null!=e){let t=JSON.parse(e);(async()=>{let e=await fetch("https://data.tripknock.in/user/verify",{method:"POST",headers:{"Content-Type":"application/json",admin:t.email},body:JSON.stringify({id:t.id,email:t.email})}),a=await e.json();!1===a.status?(d(!1),s.push("/login"),m({})):(m(a),d(!0))})()}else m({}),d(!1),s.push("/login")},[l]),(0,a.jsx)(i.Provider,{value:{user:u,isLoggedIn:c,login:e=>{m(e),d(!0)},logout:()=>{m(null),d(!1)}},children:t})},c=()=>(0,r.useContext)(i)},38258:(e,t,s)=>{"use strict";s.d(t,{M:()=>c,o:()=>d});var a=s(95155),r=s(12115),n=s(44522),o=s(7743),i=s(10810);let l=(0,r.createContext)(),c=()=>{let e=(0,r.useContext)(l);if(!e)throw Error("useLoading must be used within a LoadingProvider");return e},d=e=>{let{children:t}=e,[s,c]=(0,r.useState)({}),[d,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)("");return(0,a.jsxs)(l.Provider,{value:{setLoading:function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";c(s=>({...s,[e]:t})),t&&s&&h(s)},isLoading:e=>s[e]||!1,showGlobalLoading:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Loading...";h(e),u(!0)},hideGlobalLoading:()=>{u(!1),h("")},hasAnyLoading:()=>d||Object.values(s).some(e=>e),globalLoading:d},children:[t,(0,a.jsxs)(n.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1,backgroundColor:"rgba(0, 0, 0, 0.7)",flexDirection:"column",gap:2},open:d,children:[(0,a.jsx)(o.A,{color:"inherit",size:60}),m&&(0,a.jsx)(i.A,{variant:"h6",component:"div",children:m})]})]})}},8077:(e,t,s)=>{"use strict";s.d(t,{h:()=>l,p:()=>d});var a=s(95155),r=s(58803),n=s.n(r),o=s(12115);let i=(0,o.createContext)(),l=()=>{let e=(0,o.useContext)(i);if(!e)throw Error("useNotification must be used within a NotificationProvider");return e},c=e=>{let{notification:t,onRemove:s}=e;return(0,o.useEffect)(()=>{if(t.autoHide){let e=setTimeout(()=>{s(t.id)},t.duration);return()=>clearTimeout(e)}},[t,s]),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 mb-3 rounded-lg shadow-lg min-w-[300px] max-w-[400px] border-l-4 transform transition-all duration-300",style:{animation:"slideIn 0.3s ease-out",...(e=>{switch(e){case"success":return{backgroundColor:"#10B981",color:"white",borderLeftColor:"#059669"};case"error":return{backgroundColor:"#EF4444",color:"white",borderLeftColor:"#DC2626"};case"warning":return{backgroundColor:"#F59E0B",color:"white",borderLeftColor:"#D97706"};case"info":return{backgroundColor:"#3B82F6",color:"white",borderLeftColor:"#2563EB"};default:return{backgroundColor:"#6B7280",color:"white",borderLeftColor:"#4B5563"}}})(t.type)},children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-xl mr-3 font-bold",children:(e=>{switch(e){case"success":return"✓";case"error":return"✕";case"warning":return"⚠";case"info":return"ℹ";default:return"•"}})(t.type)}),(0,a.jsx)("span",{className:"text-sm font-medium",children:t.message})]}),(0,a.jsx)("button",{onClick:()=>s(t.id),className:"ml-4 text-white hover:text-gray-200 font-bold text-lg",children:"\xd7"})]})},d=e=>{let{children:t}=e,[s,r]=(0,o.useState)([]),l=(0,o.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",s=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3,n=Date.now()+Math.random(),o={id:n,message:e,type:t,autoHide:s,duration:a};return r(e=>[...e,o]),n},[]),d=(0,o.useCallback)(e=>{r(t=>t.filter(t=>t.id!==e))},[]),u=(0,o.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return l(e,"success",t,5e3)},[l]),m=(0,o.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return l(e,"error",t,7e3)},[l]),h=(0,o.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return l(e,"warning",t,6e3)},[l]),x=(0,o.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return l(e,"info",t,4e3)},[l]),f=(0,o.useCallback)(()=>{u("Test notification is working!")},[u]),p=(0,o.useCallback)(()=>({addNotification:l,removeNotification:d,showSuccess:u,showError:m,showWarning:h,showInfo:x,testNotification:f}),[l,d,u,m,h,x,f]);return(0,a.jsxs)(i.Provider,{value:p(),children:[t,(0,a.jsx)("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:999999,pointerEvents:"none"},className:"jsx-5de7ed1ad044b70b",children:(0,a.jsx)("div",{style:{pointerEvents:"auto"},className:"jsx-5de7ed1ad044b70b",children:s.map(e=>(0,a.jsx)(c,{notification:e,onRemove:d},e.id))})}),(0,a.jsx)(n(),{id:"5de7ed1ad044b70b",children:"@-webkit-keyframes slideIn{from{-webkit-transform:translatex(100%);transform:translatex(100%);opacity:0}to{-webkit-transform:translatex(0);transform:translatex(0);opacity:1}}@-moz-keyframes slideIn{from{-moz-transform:translatex(100%);transform:translatex(100%);opacity:0}to{-moz-transform:translatex(0);transform:translatex(0);opacity:1}}@-o-keyframes slideIn{from{-o-transform:translatex(100%);transform:translatex(100%);opacity:0}to{-o-transform:translatex(0);transform:translatex(0);opacity:1}}@keyframes slideIn{from{-webkit-transform:translatex(100%);-moz-transform:translatex(100%);-o-transform:translatex(100%);transform:translatex(100%);opacity:0}to{-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0);opacity:1}}"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2983,401,164,8441,1517,7358],()=>t(17041)),_N_E=e.O()}]);