(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6945],{26539:(e,t,r)=>{Promise.resolve().then(r.bind(r,99191))},77740:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(12983),s=r(95155);let a=(0,n.A)((0,s.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},6327:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(12983),s=r(95155);let a=(0,n.A)((0,s.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},78069:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(12983),s=r(95155);let a=(0,n.A)((0,s.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},79545:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(12983),s=r(95155);let a=(0,n.A)((0,s.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},55088:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(12983),s=r(95155);let a=(0,n.A)((0,s.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning")},36228:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(95155),s=r(97908);function a(){return(0,n.jsx)(s.A,{})}},99191:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var n=r(95155),s=r(12115),a=r(77740),o=r(79545),l=r(78069),i=r(6327);let c=(0,r(12983).A)((0,n.jsx)("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"}),"Image");var d=r(78477),u=r(7743),m=r(89208),h=r(36228),x=r(8077),f=r(38258);function p(){let{showSuccess:e,showError:t}=(0,x.h)(),{setLoading:r,isLoading:p}=(0,f.M)(),[b,g]=(0,s.useState)([]),[v,j]=(0,s.useState)(!1),[y,w]=(0,s.useState)(null),[N,C]=(0,s.useState)({name:"",icon:null}),[k,A]=(0,s.useState)(null),[I,z]=(0,s.useState)(""),[E,S]=(0,s.useState)(!1),[L,D]=(0,s.useState)(0);(0,s.useEffect)(()=>{document.title="Tour Includes - Admin",F()},[L]);let F=async()=>{try{r("fetchIncludes",!0,"Loading includes...");let e=await fetch("https://data.tripknock.in/include/all",{method:"GET",headers:{admin:JSON.parse(m.A.get("tk_auth_details")).email}}),n=await e.json();!1===n.status?t("Failed to fetch includes"):g(n)}catch(e){console.log("Error fetching includes:",e),t("Error fetching includes")}finally{r("fetchIncludes",!1)}},O=e=>{w(e),C({name:e.name,icon:null}),z(e.icon),j(!0)},T=async r=>{var n;r.preventDefault(),S(!0);let s=new FormData;s.append("image",null!==(n=N.icon)&&void 0!==n?n:null),s.append("name",N.name),null!==y&&s.append("id",y.id);try{let r=y?"update":"create",n=await fetch("https://data.tripknock.in/include/".concat(r),{method:"POST",headers:{admin:JSON.parse(m.A.get("tk_auth_details")).email},body:s}),a=await n.json();!0===a.status?(e(a.message||"Include ".concat(y?"updated":"created"," successfully")),j(!1),C({name:"",icon:null}),z(""),w(null),D(L+1)):t(a.message||"Failed to ".concat(y?"update":"create"," include"))}catch(e){console.log("Error submitting include:",e),t("An unexpected error occurred. Please try again.")}finally{S(!1)}},M=e=>{A(e)},_=async()=>{S(!0);try{let r=await fetch("https://data.tripknock.in/include/delete",{method:"POST",headers:{"Content-Type":"application/json",admin:JSON.parse(m.A.get("tk_auth_details")).email},body:JSON.stringify({id:k.id})}),n=await r.json();!0===n.status?(e(n.message||"Tour include deleted successfully"),D(L+1)):t(n.message||"Failed to delete include")}catch(e){console.log("Error deleting include:",e),t("An unexpected error occurred. Please try again.")}finally{S(!1),A(null)}};return(0,n.jsx)(n.Fragment,{children:p("fetchIncludes")?(0,n.jsx)(h.A,{}):(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-secondary-900",children:"Tour Includes"}),(0,n.jsxs)("button",{onClick:()=>{w(null),C({name:"",icon:null}),z(""),j(!0)},className:"btn-primary",disabled:E,children:[(0,n.jsx)(a.A,{className:"w-5 h-5 mr-2"}),"Add New Include"]})]}),(0,n.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:b.map(e=>(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-secondary-200 p-4 flex flex-col items-center transition-all duration-200 hover:shadow-md hover:border-primary-200 hover:-translate-y-1 group",children:[(0,n.jsx)("div",{className:"w-16 h-16 mb-3 rounded-full bg-primary-50 flex items-center justify-center group-hover:bg-primary-100 transition-colors",children:(0,n.jsx)("img",{src:"https://data.tripknock.in/uploads/"+e.image,alt:e.name,className:"w-8 h-8"})}),(0,n.jsx)("h3",{className:"text-center font-medium text-secondary-900 group-hover:text-primary-600 transition-colors",children:e.name}),(0,n.jsxs)("div",{className:"mt-4 flex space-x-2",children:[(0,n.jsx)("button",{onClick:()=>{O(e)},className:"p-1.5 text-secondary-600 hover:text-primary-600 rounded-full hover:bg-primary-50 transition-colors",children:(0,n.jsx)(o.A,{className:"w-4 h-4"})}),(0,n.jsx)("button",{onClick:()=>M(e),className:"p-1.5 text-secondary-600 hover:text-red-600 rounded-full hover:bg-red-50 transition-colors",children:(0,n.jsx)(l.A,{className:"w-4 h-4"})})]})]},e.id))}),v&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-secondary-200",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-secondary-900",children:y?"Edit Include":"Add New Include"}),(0,n.jsx)("button",{onClick:()=>j(!1),className:"text-secondary-500 hover:text-secondary-700",disabled:E,children:(0,n.jsx)(i.A,{className:"w-6 h-6"})})]}),(0,n.jsxs)("form",{onSubmit:T,className:"p-4 space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Name"}),(0,n.jsx)("input",{type:"text",value:N.name,onChange:e=>C({...N,name:e.target.value}),className:"input-field",placeholder:"Enter include name",required:!0,disabled:E})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Icon"}),(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)("div",{className:"w-20 h-20 rounded-lg border-2 border-dashed border-secondary-300 flex items-center justify-center",children:I?(0,n.jsx)("img",{src:I,alt:"Preview",className:"w-16 h-16 object-contain"}):(0,n.jsx)(c,{className:"w-8 h-8 text-secondary-400"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files[0];t&&(C(e=>({...e,icon:t})),z(URL.createObjectURL(t)))},className:"hidden",id:"icon-upload",disabled:E}),(0,n.jsx)("label",{htmlFor:"icon-upload",className:"btn-secondary cursor-pointer ".concat(E?"opacity-50 cursor-not-allowed":""," "),children:"Choose Icon"})]})]})]}),(0,n.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,n.jsx)("button",{type:"button",onClick:()=>j(!1),className:"btn-secondary",disabled:E,children:"Cancel"}),(0,n.jsx)("button",{type:"submit",className:"btn-primary relative",disabled:E,children:E?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.A,{size:20,className:"mr-2"}),"Processing..."]}):y?"Save Changes":"Add Include"})]})]})]})}),(0,n.jsx)(d.A,{open:!!k,title:"Delete Tour Include",message:'Are you sure you want to delete "'.concat(null==k?void 0:k.name,'" ? This action cannot be undone.'),confirmLabel:E?"Deleting...":"Delete",confirmVariant:"error",onConfirm:_,onCancel:()=>A(null),disabled:E})]})})}},78477:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(95155),s=r(55088);function a(e){let{open:t,onConfirm:r,onCancel:a,title:o,message:l,confirmLabel:i="Confirm",confirmVariant:c="primary",disabled:d=!1}=e;return t?(0,n.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6 m-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 text-red-600 mb-4",children:[(0,n.jsx)(s.A,{className:"w-6 h-6"}),(0,n.jsx)("h2",{className:"text-lg font-semibold",children:o})]}),(0,n.jsx)("p",{className:"text-secondary-600 mb-6",children:l}),(0,n.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,n.jsx)("button",{onClick:a,className:"px-4 py-2 text-secondary-700 hover:bg-secondary-50 rounded-lg transition-colors",disabled:d,children:"Cancel"}),(0,n.jsx)("button",{onClick:r,className:"px-4 py-2 rounded-lg transition-colors ".concat((()=>{switch(c){case"error":return"bg-red-600 text-white hover:bg-red-700";case"warning":return"bg-yellow-600 text-white hover:bg-yellow-700";default:return"bg-primary-600 text-white hover:bg-primary-700"}})()," ").concat(d?"opacity-50 cursor-not-allowed":""),disabled:d,children:i})]})]})}):null}},97908:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(95155);function s(){return(0,n.jsx)("div",{className:"flex items-center justify-center min-h-[200px]",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})})}},38258:(e,t,r)=>{"use strict";r.d(t,{M:()=>c,o:()=>d});var n=r(95155),s=r(12115),a=r(44522),o=r(7743),l=r(10810);let i=(0,s.createContext)(),c=()=>{let e=(0,s.useContext)(i);if(!e)throw Error("useLoading must be used within a LoadingProvider");return e},d=e=>{let{children:t}=e,[r,c]=(0,s.useState)({}),[d,u]=(0,s.useState)(!1),[m,h]=(0,s.useState)("");return(0,n.jsxs)(i.Provider,{value:{setLoading:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";c(r=>({...r,[e]:t})),t&&r&&h(r)},isLoading:e=>r[e]||!1,showGlobalLoading:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Loading...";h(e),u(!0)},hideGlobalLoading:()=>{u(!1),h("")},hasAnyLoading:()=>d||Object.values(r).some(e=>e),globalLoading:d},children:[t,(0,n.jsxs)(a.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1,backgroundColor:"rgba(0, 0, 0, 0.7)",flexDirection:"column",gap:2},open:d,children:[(0,n.jsx)(o.A,{color:"inherit",size:60}),m&&(0,n.jsx)(l.A,{variant:"h6",component:"div",children:m})]})]})}},8077:(e,t,r)=>{"use strict";r.d(t,{h:()=>i,p:()=>d});var n=r(95155),s=r(58803),a=r.n(s),o=r(12115);let l=(0,o.createContext)(),i=()=>{let e=(0,o.useContext)(l);if(!e)throw Error("useNotification must be used within a NotificationProvider");return e},c=e=>{let{notification:t,onRemove:r}=e;return(0,o.useEffect)(()=>{if(t.autoHide){let e=setTimeout(()=>{r(t.id)},t.duration);return()=>clearTimeout(e)}},[t,r]),(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 mb-3 rounded-lg shadow-lg min-w-[300px] max-w-[400px] border-l-4 transform transition-all duration-300",style:{animation:"slideIn 0.3s ease-out",...(e=>{switch(e){case"success":return{backgroundColor:"#10B981",color:"white",borderLeftColor:"#059669"};case"error":return{backgroundColor:"#EF4444",color:"white",borderLeftColor:"#DC2626"};case"warning":return{backgroundColor:"#F59E0B",color:"white",borderLeftColor:"#D97706"};case"info":return{backgroundColor:"#3B82F6",color:"white",borderLeftColor:"#2563EB"};default:return{backgroundColor:"#6B7280",color:"white",borderLeftColor:"#4B5563"}}})(t.type)},children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"text-xl mr-3 font-bold",children:(e=>{switch(e){case"success":return"✓";case"error":return"✕";case"warning":return"⚠";case"info":return"ℹ";default:return"•"}})(t.type)}),(0,n.jsx)("span",{className:"text-sm font-medium",children:t.message})]}),(0,n.jsx)("button",{onClick:()=>r(t.id),className:"ml-4 text-white hover:text-gray-200 font-bold text-lg",children:"\xd7"})]})},d=e=>{let{children:t}=e,[r,s]=(0,o.useState)([]),i=(0,o.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3,a=Date.now()+Math.random(),o={id:a,message:e,type:t,autoHide:r,duration:n};return s(e=>[...e,o]),a},[]),d=(0,o.useCallback)(e=>{s(t=>t.filter(t=>t.id!==e))},[]),u=(0,o.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i(e,"success",t,5e3)},[i]),m=(0,o.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i(e,"error",t,7e3)},[i]),h=(0,o.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i(e,"warning",t,6e3)},[i]),x=(0,o.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i(e,"info",t,4e3)},[i]),f=(0,o.useCallback)(()=>{u("Test notification is working!")},[u]),p=(0,o.useCallback)(()=>({addNotification:i,removeNotification:d,showSuccess:u,showError:m,showWarning:h,showInfo:x,testNotification:f}),[i,d,u,m,h,x,f]);return(0,n.jsxs)(l.Provider,{value:p(),children:[t,(0,n.jsx)("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:999999,pointerEvents:"none"},className:"jsx-5de7ed1ad044b70b",children:(0,n.jsx)("div",{style:{pointerEvents:"auto"},className:"jsx-5de7ed1ad044b70b",children:r.map(e=>(0,n.jsx)(c,{notification:e,onRemove:d},e.id))})}),(0,n.jsx)(a(),{id:"5de7ed1ad044b70b",children:"@-webkit-keyframes slideIn{from{-webkit-transform:translatex(100%);transform:translatex(100%);opacity:0}to{-webkit-transform:translatex(0);transform:translatex(0);opacity:1}}@-moz-keyframes slideIn{from{-moz-transform:translatex(100%);transform:translatex(100%);opacity:0}to{-moz-transform:translatex(0);transform:translatex(0);opacity:1}}@-o-keyframes slideIn{from{-o-transform:translatex(100%);transform:translatex(100%);opacity:0}to{-o-transform:translatex(0);transform:translatex(0);opacity:1}}@keyframes slideIn{from{-webkit-transform:translatex(100%);-moz-transform:translatex(100%);-o-transform:translatex(100%);transform:translatex(100%);opacity:0}to{-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0);opacity:1}}"})]})}},89208:(e,t,r)=>{"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}r.d(t,{A:()=>s});var s=function e(t,r){function s(e,s,a){if("undefined"!=typeof document){"number"==typeof(a=n({},r,a)).expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var l in a)a[l]&&(o+="; "+l,!0!==a[l]&&(o+="="+a[l].split(";")[0]));return document.cookie=e+"="+t.write(s,e)+o}}return Object.create({set:s,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},s=0;s<r.length;s++){var a=r[s].split("="),o=a.slice(1).join("=");try{var l=decodeURIComponent(a[0]);if(n[l]=t.read(o,l),e===l)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){s(e,"",n({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,n({},this.attributes,t))},withConverter:function(t){return e(n({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},e=>{var t=t=>e(e.s=t);e.O(0,[2983,401,8441,1517,7358],()=>t(26539)),_N_E=e.O()}]);