(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4520],{88424:(e,t,r)=>{Promise.resolve().then(r.bind(r,12693))},76046:(e,t,r)=>{"use strict";var s=r(66658);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},12693:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(95155),n=r(34854),i=r(89208),a=r(76046),o=r(12115);function l(){let e=(0,a.useRouter)(),{isLoggedIn:t,login:r}=(0,n.U)(),[l,c]=(0,o.useState)(""),[u,d]=(0,o.useState)({email:"",password:""});(0,o.useEffect)(()=>{document.title="Login | TripKnock Admin",t&&e.push("/")},[t]);let m=async t=>{if(t.preventDefault(),""===u.email.trim()||""===u.password){c("Please fill all the fields");return}{let t=await fetch("https://data.tripknock.in/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u.email.toLowerCase().trim(),password:u.password})}),s=await t.json();!1===s.status?c(s.message):(i.A.set("tk_auth_details",JSON.stringify(s)),r({id:s.id,email:s.email,name:s.name,role:s.role,phone:s.phone}),e.push("/"))}};return(0,s.jsxs)("div",{className:"min-h-screen flex flex-col md:flex-row",children:[(0,s.jsx)("div",{className:"w-full md:w-1/2 flex items-center justify-center p-8 bg-white",children:(0,s.jsxs)("div",{className:"w-full max-w-md space-y-8",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"mt-2 text-3xl font-bold tracking-tight text-gray-900",children:"Welcome back"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to your admin account"})]}),(0,s.jsxs)("div",{className:"mt-8 space-y-6",children:[(0,s.jsxs)("form",{onSubmit:m,children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,s.jsx)("input",{type:"email",name:"email",value:u.email,required:!0,onChange:e=>d({...u,email:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"}),(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mt-4",children:"Password"}),(0,s.jsx)("input",{type:"password",name:"password",value:u.password,required:!0,onChange:e=>d({...u,password:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"}),(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("button",{type:"submit",className:"w-full bg-primary-500 text-white py-2 px-4 rounded-md hover:bg-primary-600 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-primary-200",children:"Sign in"})})})]}),l&&(0,s.jsx)("div",{className:"text-red-500 px-4 py-3 bg-red-100 rounded-md",children:l})]})]})}),(0,s.jsx)("div",{className:"hidden md:block md:w-1/2 bg-primary-600",children:(0,s.jsx)("div",{className:"h-full flex items-center justify-center p-8",children:(0,s.jsxs)("div",{className:"max-w-md text-center text-white",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold mb-6",children:"Tripknock Admin Panel"}),(0,s.jsx)("p",{className:"text-lg text-primary-100",children:"Manage your travel business efficiently with our comprehensive admin tools"})]})})})]})}},34854:(e,t,r)=>{"use strict";r.d(t,{D:()=>l,U:()=>c});var s=r(95155),n=r(12115),i=r(89208),a=r(76046);let o=(0,n.createContext)(),l=e=>{let{children:t}=e,r=(0,a.useRouter)(),l=(0,a.usePathname)(),[c,u]=(0,n.useState)(!1),[d,m]=(0,n.useState)({id:"",email:"",name:"",role:"",phone:""});return(0,n.useEffect)(()=>{let e=i.A.get("tk_auth_details");if(null!=e){let t=JSON.parse(e);(async()=>{let e=await fetch("https://data.tripknock.in/user/verify",{method:"POST",headers:{"Content-Type":"application/json",admin:t.email},body:JSON.stringify({id:t.id,email:t.email})}),s=await e.json();!1===s.status?(u(!1),r.push("/login"),m({})):(m(s),u(!0))})()}else m({}),u(!1),r.push("/login")},[l]),(0,s.jsx)(o.Provider,{value:{user:d,isLoggedIn:c,login:e=>{m(e),u(!0)},logout:()=>{m(null),u(!1)}},children:t})},c=()=>(0,n.useContext)(o)},89208:(e,t,r)=>{"use strict";function s(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)e[s]=r[s]}return e}r.d(t,{A:()=>n});var n=function e(t,r){function n(e,n,i){if("undefined"!=typeof document){"number"==typeof(i=s({},r,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var o in i)i[o]&&(a+="; "+o,!0!==i[o]&&(a+="="+i[o].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+a}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],s={},n=0;n<r.length;n++){var i=r[n].split("="),a=i.slice(1).join("=");try{var o=decodeURIComponent(i[0]);if(s[o]=t.read(a,o),e===o)break}catch(e){}}return e?s[e]:s}},remove:function(e,t){n(e,"",s({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,s({},this.attributes,t))},withConverter:function(t){return e(s({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},e=>{var t=t=>e(e.s=t);e.O(0,[8441,1517,7358],()=>t(88424)),_N_E=e.O()}]);