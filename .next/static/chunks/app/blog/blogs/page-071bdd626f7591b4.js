(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9497],{54478:(e,t,s)=>{Promise.resolve().then(s.bind(s,76512))},77740:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(12983),r=s(95155);let n=(0,a.A)((0,r.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},78069:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(12983),r=s(95155);let n=(0,a.A)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},79545:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(12983),r=s(95155);let n=(0,a.A)((0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},78205:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(12983),r=s(95155);let n=(0,a.A)((0,r.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},9313:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(12983),r=s(95155);let n=(0,a.A)((0,r.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},55088:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(12983),r=s(95155);let n=(0,a.A)((0,r.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning")},76512:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var a=s(95155),r=s(12115),n=s(48173),l=s.n(n),o=s(77740),i=s(78205),c=s(9313),d=s(79545),x=s(78069),h=s(97908),m=s(78477),u=s(89208),f=s(8077),p=s(38258);function g(){let{showSuccess:e,showError:t,showInfo:s}=(0,f.h)(),{setLoading:n,isLoading:g}=(0,p.M)(),[y,b]=(0,r.useState)(""),[j,w]=(0,r.useState)([]),[v,N]=(0,r.useState)(null),[k,C]=(0,r.useState)("all"),[A,L]=(0,r.useState)("all"),[S,z]=(0,r.useState)([]);(0,r.useEffect)(()=>{document.title="Blogs - Tripknock",n("fetchData",!0,"Loading blogs..."),E(),D();try{u.A.get("tk_auth_details")||t("Admin authentication not found. Some features may be limited.")}catch(e){console.log("Error checking authentication:",e),t("Error checking authentication")}},[]);let E=async()=>{try{let e=await fetch("https://data.tripknock.in/blog/all");if(e.ok){let t=await e.json();w(t)}else t("Failed to fetch articles: ".concat(e.status," ").concat(e.statusText))}catch(e){console.log("Error fetching articles:",e),t("Network error: ".concat(e.message))}finally{n("fetchData",!1)}},D=async()=>{try{let e=await fetch("https://data.tripknock.in/blog/categories/all");if(e.ok){let t=await e.json();z(t)}else t("Failed to fetch categories")}catch(e){console.log("Error fetching categories:",e),t("Error fetching categories")}},M=j.filter(e=>{let t=e.title.toLowerCase().includes(y.toLowerCase()),s="all"===k||e.status===k,a="all"===A||Array.isArray(e.category)&&e.category.some(e=>"object"==typeof e&&e.id?e.id.toString()===A:e===A);return t&&s&&a}),_=e=>{C(e)},B=async e=>{N(e)},P=async()=>{n("deleteArticle",!0,"Deleting blog...");try{let s=u.A.get("tk_auth_details");if(!s)throw Error("Authentication required. Please log in as an admin.");let a=JSON.parse(s).email,r=await fetch("https://data.tripknock.in/blog/delete/".concat(v.id),{method:"POST",headers:{"Content-Type":"application/json",admin:a}});if(r.ok)w(e=>e.filter(e=>e.id!==v.id)),e("Blog deleted successfully");else{let e=await r.json();t("Failed to delete blog: ".concat(e.message))}}catch(e){console.log("Error deleting article:",e),t("An unexpected error occurred. Please try again.")}finally{n("deleteArticle",!1),N(null)}};return(0,a.jsxs)(a.Fragment,{children:[g("fetchData")?(0,a.jsx)(h.A,{}):(0,a.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-secondary-900",children:"All Blogs"}),(0,a.jsx)("p",{className:"text-secondary-600",children:"Manage your blogs"})]}),(0,a.jsxs)(l(),{href:"/blog/blogs/create",className:"btn-primary flex items-center gap-2",children:[(0,a.jsx)(o.A,{className:"w-5 h-5"}),"Create Blog"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-secondary-200",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-secondary-200 flex flex-col md:flex-row justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,a.jsx)(i.A,{className:"text-secondary-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search articles...",value:y,onChange:e=>{b(e.target.value)},className:"flex-1 bg-transparent border-none focus:outline-none text-secondary-900 placeholder-secondary-400"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-secondary-500",children:"Status:"}),(0,a.jsxs)("div",{className:"flex rounded-md overflow-hidden border border-secondary-200",children:[(0,a.jsx)("button",{onClick:()=>_("all"),className:"px-3 py-1.5 text-sm ".concat("all"===k?"bg-primary-600 text-white":"bg-white text-secondary-700 hover:bg-secondary-50"),children:"All"}),(0,a.jsx)("button",{onClick:()=>_("published"),className:"px-3 py-1.5 text-sm ".concat("published"===k?"bg-green-600 text-white":"bg-white text-secondary-700 hover:bg-secondary-50"),children:"Published"}),(0,a.jsx)("button",{onClick:()=>_("draft"),className:"px-3 py-1.5 text-sm ".concat("draft"===k?"bg-yellow-600 text-white":"bg-white text-secondary-700 hover:bg-secondary-50"),children:"Draft"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-secondary-500",children:"Category:"}),(0,a.jsxs)("select",{value:A,onChange:e=>{L(e.target.value)},className:"px-3 py-1.5 text-sm bg-white border border-secondary-200 rounded-md focus:outline-none focus:ring-primary-600 focus:border-primary-600",children:[(0,a.jsx)("option",{value:"all",children:"All Categories"}),S.map(e=>(0,a.jsx)("option",{value:e.name,children:e.name},e.id))]})]})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-secondary-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Title"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Category"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Author"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Date"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-secondary-200",children:0===M.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:"6",className:"px-6 py-4 text-center text-secondary-500",children:"No articles found"})}):M.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-secondary-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-secondary-900",children:e.title}),(0,a.jsx)("div",{className:"text-sm text-secondary-500",children:e.slug})]})})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-secondary-900",children:Array.isArray(e.category)&&e.category.length>0?e.category.join(", "):"Uncategorized"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-secondary-900",children:e.author_name}),(0,a.jsx)("div",{className:"text-sm text-secondary-500",children:e.author})]})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("published"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status}),(0,a.jsx)("span",{className:"text-xs text-secondary-500 block mt-1",children:e.last_modified})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-secondary-500",children:e.date}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:["published"===e.status&&(0,a.jsx)(l(),{href:"/blog/blogs/".concat(e.id,"/edit"),className:"text-primary-600 hover:text-primary-900",children:(0,a.jsx)(c.A,{className:"w-5 h-5"})}),(0,a.jsx)(l(),{href:"/blog/blogs/".concat(e.id,"/edit"),className:"text-primary-600 hover:text-primary-900",children:(0,a.jsx)(d.A,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>B(e),className:"text-red-600 hover:text-red-900",children:(0,a.jsx)(x.A,{className:"w-5 h-5"})})]})})]},e.id))})]})})]})]}),v&&(0,a.jsx)(m.A,{title:"Delete Article",message:'Are you sure you want to delete "'.concat(v.title,'"? This action cannot be undone.'),confirmLabel:"Delete",cancelLabel:"Cancel",onConfirm:P,onCancel:()=>N(null)})]})}},78477:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(95155),r=s(55088);function n(e){let{open:t,onConfirm:s,onCancel:n,title:l,message:o,confirmLabel:i="Confirm",confirmVariant:c="primary",disabled:d=!1}=e;return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6 m-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 text-red-600 mb-4",children:[(0,a.jsx)(r.A,{className:"w-6 h-6"}),(0,a.jsx)("h2",{className:"text-lg font-semibold",children:l})]}),(0,a.jsx)("p",{className:"text-secondary-600 mb-6",children:o}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:n,className:"px-4 py-2 text-secondary-700 hover:bg-secondary-50 rounded-lg transition-colors",disabled:d,children:"Cancel"}),(0,a.jsx)("button",{onClick:s,className:"px-4 py-2 rounded-lg transition-colors ".concat((()=>{switch(c){case"error":return"bg-red-600 text-white hover:bg-red-700";case"warning":return"bg-yellow-600 text-white hover:bg-yellow-700";default:return"bg-primary-600 text-white hover:bg-primary-700"}})()," ").concat(d?"opacity-50 cursor-not-allowed":""),disabled:d,children:i})]})]})}):null}},97908:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(95155);function r(){return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[200px]",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})})}},38258:(e,t,s)=>{"use strict";s.d(t,{M:()=>c,o:()=>d});var a=s(95155),r=s(12115),n=s(44522),l=s(7743),o=s(10810);let i=(0,r.createContext)(),c=()=>{let e=(0,r.useContext)(i);if(!e)throw Error("useLoading must be used within a LoadingProvider");return e},d=e=>{let{children:t}=e,[s,c]=(0,r.useState)({}),[d,x]=(0,r.useState)(!1),[h,m]=(0,r.useState)("");return(0,a.jsxs)(i.Provider,{value:{setLoading:function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";c(s=>({...s,[e]:t})),t&&s&&m(s)},isLoading:e=>s[e]||!1,showGlobalLoading:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Loading...";m(e),x(!0)},hideGlobalLoading:()=>{x(!1),m("")},hasAnyLoading:()=>d||Object.values(s).some(e=>e),globalLoading:d},children:[t,(0,a.jsxs)(n.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1,backgroundColor:"rgba(0, 0, 0, 0.7)",flexDirection:"column",gap:2},open:d,children:[(0,a.jsx)(l.A,{color:"inherit",size:60}),h&&(0,a.jsx)(o.A,{variant:"h6",component:"div",children:h})]})]})}},8077:(e,t,s)=>{"use strict";s.d(t,{h:()=>i,p:()=>d});var a=s(95155),r=s(58803),n=s.n(r),l=s(12115);let o=(0,l.createContext)(),i=()=>{let e=(0,l.useContext)(o);if(!e)throw Error("useNotification must be used within a NotificationProvider");return e},c=e=>{let{notification:t,onRemove:s}=e;return(0,l.useEffect)(()=>{if(t.autoHide){let e=setTimeout(()=>{s(t.id)},t.duration);return()=>clearTimeout(e)}},[t,s]),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 mb-3 rounded-lg shadow-lg min-w-[300px] max-w-[400px] border-l-4 transform transition-all duration-300",style:{animation:"slideIn 0.3s ease-out",...(e=>{switch(e){case"success":return{backgroundColor:"#10B981",color:"white",borderLeftColor:"#059669"};case"error":return{backgroundColor:"#EF4444",color:"white",borderLeftColor:"#DC2626"};case"warning":return{backgroundColor:"#F59E0B",color:"white",borderLeftColor:"#D97706"};case"info":return{backgroundColor:"#3B82F6",color:"white",borderLeftColor:"#2563EB"};default:return{backgroundColor:"#6B7280",color:"white",borderLeftColor:"#4B5563"}}})(t.type)},children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-xl mr-3 font-bold",children:(e=>{switch(e){case"success":return"✓";case"error":return"✕";case"warning":return"⚠";case"info":return"ℹ";default:return"•"}})(t.type)}),(0,a.jsx)("span",{className:"text-sm font-medium",children:t.message})]}),(0,a.jsx)("button",{onClick:()=>s(t.id),className:"ml-4 text-white hover:text-gray-200 font-bold text-lg",children:"\xd7"})]})},d=e=>{let{children:t}=e,[s,r]=(0,l.useState)([]),i=(0,l.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",s=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3,n=Date.now()+Math.random(),l={id:n,message:e,type:t,autoHide:s,duration:a};return r(e=>[...e,l]),n},[]),d=(0,l.useCallback)(e=>{r(t=>t.filter(t=>t.id!==e))},[]),x=(0,l.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i(e,"success",t,5e3)},[i]),h=(0,l.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i(e,"error",t,7e3)},[i]),m=(0,l.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i(e,"warning",t,6e3)},[i]),u=(0,l.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i(e,"info",t,4e3)},[i]),f=(0,l.useCallback)(()=>{x("Test notification is working!")},[x]),p=(0,l.useCallback)(()=>({addNotification:i,removeNotification:d,showSuccess:x,showError:h,showWarning:m,showInfo:u,testNotification:f}),[i,d,x,h,m,u,f]);return(0,a.jsxs)(o.Provider,{value:p(),children:[t,(0,a.jsx)("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:999999,pointerEvents:"none"},className:"jsx-5de7ed1ad044b70b",children:(0,a.jsx)("div",{style:{pointerEvents:"auto"},className:"jsx-5de7ed1ad044b70b",children:s.map(e=>(0,a.jsx)(c,{notification:e,onRemove:d},e.id))})}),(0,a.jsx)(n(),{id:"5de7ed1ad044b70b",children:"@-webkit-keyframes slideIn{from{-webkit-transform:translatex(100%);transform:translatex(100%);opacity:0}to{-webkit-transform:translatex(0);transform:translatex(0);opacity:1}}@-moz-keyframes slideIn{from{-moz-transform:translatex(100%);transform:translatex(100%);opacity:0}to{-moz-transform:translatex(0);transform:translatex(0);opacity:1}}@-o-keyframes slideIn{from{-o-transform:translatex(100%);transform:translatex(100%);opacity:0}to{-o-transform:translatex(0);transform:translatex(0);opacity:1}}@keyframes slideIn{from{-webkit-transform:translatex(100%);-moz-transform:translatex(100%);-o-transform:translatex(100%);transform:translatex(100%);opacity:0}to{-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0);opacity:1}}"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2983,401,164,8441,1517,7358],()=>t(54478)),_N_E=e.O()}]);